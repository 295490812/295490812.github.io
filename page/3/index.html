<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.0.2"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-hybird开发技术选型" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/21/hybird%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B/" class="article-date">
  <time datetime="2019-03-21T07:51:13.000Z" itemprop="datePublished">2019-03-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/react/">react</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/21/hybird%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B/">hybird开发技术选型</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-混合移动App开发介绍"><a href="#1-混合移动App开发介绍" class="headerlink" title="1.混合移动App开发介绍"></a>1.混合移动App开发介绍</h2><h3 id="1-1-混合开发的基本概念"><a href="#1-1-混合开发的基本概念" class="headerlink" title="1.1 混合开发的基本概念"></a>1.1 混合开发的基本概念</h3><ul>
<li><p>原生开发：它的英文单词是（NativeApp）,指的就是使用 IOS、Android 官方提供的工具、开发平台、配套语言进行手机App开发的方式；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">苹果的软件开发：使用的是 OC、或者使用Swift这门语言</span><br><span class="line">安卓的软件开发：使用Java</span><br></pre></td></tr></table></figure>
</li>
<li><p>混合开发：（HybirdApp）就是使用前端已有的技术，HTML + CSS + JS ，然后再搭配一些相关的打包编译技术，就能够开发出一个手机App，安装到手机中进行使用；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">前端的混合移动App开发技术，并没有使用苹果或安卓官方推荐的开发平台和开发方式，而是抛弃了 官方提供的方式，使用前端的独有的技术进行移动App开发体验；</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="1-2-App介绍"><a href="#1-2-App介绍" class="headerlink" title="1.2 App介绍"></a>1.2 App介绍</h3><ul>
<li><p>什么是App：App是（Application的缩写），意思是：可安装的应用程序；</p>
</li>
<li><p>App的分类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">按照平台来划分：</span><br><span class="line">  - PC端：浏览器、代码编辑器、PC端的游戏、听歌的、看视频的、聊天的</span><br><span class="line">  - 移动端：手机QQ、手机微信、手机爱奇艺、亡者农药</span><br><span class="line">  </span><br><span class="line">按照功能来划分：</span><br><span class="line">  - 游戏：愤怒的小鸡仔、植物大战僵尸、亡者农药.....LOL</span><br><span class="line">  - 应用：非游戏类的软件，支付宝、陌陌、美团外卖、</span><br></pre></td></tr></table></figure>
</li>
<li><p>App和Web的区别：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">APP概念：App是（Application的缩写），意思是：可安装的应用程序；</span><br><span class="line">- 优点：流畅、稳定、基本上一些App都可以脱网运行，用户体验好；</span><br><span class="line">- 缺点：不能跨平台 </span><br><span class="line"></span><br><span class="line">Web概念：特指那些基于浏览器的web网站（本质：就是网页）</span><br><span class="line">- 优点：可以跨平台（浏览器天生就是跨平台的）</span><br><span class="line">- 缺点：没有App流畅、不稳定，受限于网速和网络</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="1-3-常见的App开发方式"><a href="#1-3-常见的App开发方式" class="headerlink" title="1.3 常见的App开发方式"></a>1.3 常见的App开发方式</h3><ul>
<li><p>WebApp(H5App)：基于浏览器实现的，有特定功能的网站，称作WebApp</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">例如：百度脑图、https:&#x2F;&#x2F;m.jd.com&#x2F;、https:&#x2F;&#x2F;m.taobao.com&#x2F;#index</span><br><span class="line"></span><br><span class="line">优点：跨平台</span><br><span class="line">缺点：依赖网络，有白屏效果，相对来说，用户体验差；不能调用硬件底层得设备，比如摄像头</span><br></pre></td></tr></table></figure>
</li>
<li><p>NativeApp：用android和Object-C等原生语言开发的应用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">优点：体验好；用户使用起来很流畅；非常适合做游戏【性能高】；可以直接调用硬件底层的API；</span><br><span class="line">缺点：不能跨平台</span><br></pre></td></tr></table></figure>
</li>
<li><p>HybirdApp：利用前端所学的知识去开发移动端App，兼具2者的优势</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">优点：能够跨平台；体验会好一些；也能够调用硬件底层的API</span><br><span class="line">缺点：相对于原生体验稍微弱一丢丢；不适合做游戏；适合做非游戏类型的手机App；</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="1-4-三种开发方式的原理和对比"><a href="#1-4-三种开发方式的原理和对比" class="headerlink" title="1.4 三种开发方式的原理和对比"></a>1.4 三种开发方式的原理和对比</h3><p><img src="hybird%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B/%E4%B8%89%E7%A7%8D%E5%BC%80%E5%8F%91%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8E%9F%E7%90%86.png"></p>
<p>注意： 使用 Java 或者 IOS 写出来的代码和程序，在最终运行的时候，普通的文本代码，都会被编译为 原生的机器码去运行，并不像 JS 这样，解析执行，Java代码是 编译执行的；</p>
<p><img src="hybird%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B/%E4%B8%89%E7%A7%8D%E5%BC%80%E5%8F%91%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%AF%B9%E6%AF%94.png"></p>
<h3 id="1-5-选择合适的App开发方式"><a href="#1-5-选择合适的App开发方式" class="headerlink" title="1.5 选择合适的App开发方式"></a>1.5 选择合适的App开发方式</h3><ol>
<li>如果这个企业中，曾经使用原生技术开发过一些APP，那么在维护的时候，必然需要使用原生技术来维护</li>
<li>如果企业中，需要做一些游戏级别的应用，那么推荐使用原生，因为原生运行效率高，对耗电量处理的很好；</li>
<li>如果企业做一些应用级别的非游戏软件，比如 淘宝、京东、美团，就可以使用混合APP了；</li>
<li>在企业中最主要的是好的点子，如果有了一个好的项目立案，那么最好要立即把这个项目做出来；这时候，使用混合App非常合适，因为开发周期很短，能快速上线，抢先占领市场；【裤衩开发】</li>
</ol>
<h3 id="1-6-混合式开发的技术选型"><a href="#1-6-混合式开发的技术选型" class="headerlink" title="1.6 混合式开发的技术选型"></a>1.6 混合式开发的技术选型</h3><ul>
<li><p>Angular/React(Vue) + Ionic</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">特点：</span><br><span class="line">- 对Angular支持好</span><br><span class="line">- 开发H5App、HybirdApp</span><br><span class="line">- 基于Cordova提供的打包命令打包成iOS、android端程序</span><br><span class="line">- 支持web、iOS、android(HybirdApp应用)</span><br></pre></td></tr></table></figure>
</li>
<li><p>h5+</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">特点：</span><br><span class="line">- 提供打包工具将H5应用打包成HybirdApp应用</span><br></pre></td></tr></table></figure>
</li>
<li><p>React+React-Native</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">特点：</span><br><span class="line">- 基于React语法</span><br><span class="line">- 开发NativeApp</span><br><span class="line">- 提供编译工具将源代码编译成iOS和android端应用</span><br><span class="line">- 坑多，社区生态多，目前是主流的原生开发技术</span><br><span class="line">- facebook正在重构React-Native</span><br></pre></td></tr></table></figure>

<p><img src="hybird%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B/1581226008580.png" alt="1581226008580"></p>
</li>
<li><p>Vue+Weex(阿里)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- 使用vue作为上层框架</span><br><span class="line">- 开发WebApp、NativeApp</span><br><span class="line">- 使用Weex提供的打包工具打包成iOS、android端程序</span><br><span class="line">- 支持web、iOS、android(NativeApp应用)</span><br><span class="line">- 更新慢、坑多、社区不活跃</span><br></pre></td></tr></table></figure>

<p><img src="hybird%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B/1581221851996.png" alt="1581221851996"></p>
</li>
<li><p>flutter(谷歌)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">特点：</span><br><span class="line">- 基于dart语言（不是JavaScript）</span><br><span class="line">- 框架较新，坑多</span><br><span class="line">- 开发NativeApp</span><br><span class="line">- 没有使用iOS和android的原生组件，使用的是自己定义的Widgets(小控件)</span><br></pre></td></tr></table></figure>
</li>
<li><p>React+Taro(京东)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">特点：</span><br><span class="line">- 基于React语法</span><br><span class="line">- 一套源码，多端支持（微信&#x2F;百度&#x2F;支付宝&#x2F;头条&#x2F;QQ小程序、H5App、React Native）</span><br><span class="line">- 提供编译工具将源代码分别编译成各种小程序、H5、RN</span><br><span class="line">- 坑多、框架新、更新维护快、官方微信群活跃</span><br><span class="line">- 一般可以用来写各种小程序，只支持Taro自己提供的UI库，不支持第三方UI库(小程序的库肯定不能用在React Native)</span><br></pre></td></tr></table></figure>

<p><img src="hybird%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B/1581223352775.png" alt="1581223352775"></p>
</li>
<li><p>uni-app</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">特点：</span><br><span class="line">- 基于Vue语法</span><br><span class="line">- 一套源码，多端支持(微信&#x2F;百度&#x2F;支付宝&#x2F;头条&#x2F;QQ小程序、H5App、NativeApp)</span><br><span class="line">- 提供编译工具将源代码分别编译成各种小程序、H5、NativeApp</span><br><span class="line">- App端使用H5+规范，H5+规范包括了html5plus、Native.js、weex</span><br><span class="line">- 坑多，社区不够强大</span><br><span class="line">- 可以用来写各种小程序和H5App</span><br></pre></td></tr></table></figure>

</li>
</ul>
<blockquote>
<p>Angular, Vue, React 这三个都是前端框架，我们在进行混合App开发的时候，只是用到了这三个框架的【基础语法】而已；</p>
</blockquote>
<h3 id="1-7-开发技术选型之间的区别"><a href="#1-7-开发技术选型之间的区别" class="headerlink" title="1.7 开发技术选型之间的区别"></a>1.7 开发技术选型之间的区别</h3><p><img src="hybird%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B/aa.png"></p>
<ul>
<li><p>Vue结合 Weex (阿里)这门技术，提供了原生移动App开发的体验（Weex，目前只是一个小的玩具， 并没有很成功的大案例；）</p>
</li>
<li><p>React结合 ReactNative，也提供了原生移动App的开发体验（RN用的最多，也是最火最流行的）；</p>
<p>Who’s using React Native? <a target="_blank" rel="noopener" href="https://facebook.github.io/react-native/showcase">https://facebook.github.io/react-native/showcase</a></p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/21/hybird%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B/" data-id="ckdzwmbda00080wv0ahwm442p" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-vue双向数据绑定" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/21/vue%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A/" class="article-date">
  <time datetime="2019-03-21T04:37:26.000Z" itemprop="datePublished">2019-03-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/vue/">vue</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/21/vue%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A/">vue双向数据绑定</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="vue双向绑定的原理"><a href="#vue双向绑定的原理" class="headerlink" title="vue双向绑定的原理"></a>vue双向绑定的原理</h2><h3 id="a-页面–-gt-数据"><a href="#a-页面–-gt-数据" class="headerlink" title="a) 页面–&gt;数据"></a>a) 页面–&gt;数据</h3><p>view更新data只需要添加DOM事件监听即可，比如input标签监听 ‘input’ 事件就可以实现</p>
<h3 id="b-数据–-gt-页面"><a href="#b-数据–-gt-页面" class="headerlink" title="b) 数据–&gt;页面"></a>b) 数据–&gt;页面</h3><p>是通过数据劫持 + 发布者-订阅者模式的方式来实现的</p>
<h4 id="1-数据劫持"><a href="#1-数据劫持" class="headerlink" title="(1).数据劫持"></a>(1).数据劫持</h4><p>vue是通过Object.defineProperty()来实现数据劫持的。(vue3.0已换成proxy来实现数据劫持)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> book = &#123;&#125;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(book, <span class="string">&#x27;name&#x27;</span>, &#123;</span><br><span class="line">    set: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">        name = value;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;你取了一个书名叫做&#x27;</span> + value);</span><br><span class="line">    &#125;,</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;《&#x27;</span> + name + <span class="string">&#x27;》&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">book.name = <span class="string">&#x27;vue权威指南&#x27;</span>;  <span class="comment">// 你取了一个书名叫做vue权威指南</span></span><br><span class="line">book.name = <span class="string">&#x27;vue权威指南2&#x27;</span>;  <span class="comment">// 你取了一个书名叫做vue权威指南</span></span><br><span class="line"><span class="built_in">console</span>.log(book.name);  <span class="comment">// 《vue权威指南》</span></span><br></pre></td></tr></table></figure>

<h4 id="2-发布者订阅模式"><a href="#2-发布者订阅模式" class="headerlink" title="(2).发布者订阅模式"></a>(2).发布者订阅模式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//订阅器</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dept</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.watchers = [];</span><br><span class="line">&#125;</span><br><span class="line">Dept.prototype.addWatcher = <span class="function"><span class="keyword">function</span> (<span class="params">watcher</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.watchers.push(watcher);</span><br><span class="line">&#125;</span><br><span class="line">Dept.prototype.notifyWatcher = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.watchers.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">watcher</span>) </span>&#123;</span><br><span class="line">        watcher.update(value);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//订阅者</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Watcher</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">Watcher.prototype.update = <span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name+<span class="string">&quot;接收到新天气&quot;</span>+value+<span class="string">&quot;，准备干啥&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建几个订阅者</span></span><br><span class="line"><span class="keyword">var</span> xiaoming = <span class="keyword">new</span> Watcher(<span class="string">&quot;小明&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> xiaohong = <span class="keyword">new</span> Watcher(<span class="string">&quot;小红&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> xiaohei = <span class="keyword">new</span> Watcher(<span class="string">&quot;小黑&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建一个订阅器</span></span><br><span class="line"><span class="keyword">var</span> dept = <span class="keyword">new</span> Dept();</span><br><span class="line">dept.addWatcher(xiaoming);</span><br><span class="line">dept.addWatcher(xiaohong);</span><br><span class="line">dept.addWatcher(xiaohei);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//数据劫持常用方案：Object.defineProperty(Vue 2.0)    Proxy(Vue 3.0)</span></span><br><span class="line"><span class="comment">//数据劫持的主要作用：劫持数据的变化</span></span><br><span class="line"><span class="keyword">var</span> weatherStation = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(weatherStation, <span class="string">&quot;weather&quot;</span>, &#123;</span><br><span class="line">    <span class="comment">//当在外部给book的name属性赋值的时候，会执行set</span></span><br><span class="line">    set: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">        name = value;</span><br><span class="line">        <span class="comment">//一旦天气变化，订阅器通知所有的观察者去更新</span></span><br><span class="line">        dept.notifyWatcher(value);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//当在外部获取book的name属性的时候，会执行get</span></span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;当前天气是&quot;</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">weatherStation.weather = <span class="string">&quot;晴天&quot;</span>;</span><br><span class="line">weatherStation.weather = <span class="string">&quot;冰雹&quot;</span>;</span><br></pre></td></tr></table></figure>

<h4 id="3-数据绑定的实现流程"><a href="#3-数据绑定的实现流程" class="headerlink" title="(3).数据绑定的实现流程"></a>(3).数据绑定的实现流程</h4><p>首先要对数据进行劫持监听，所以我们需要设置一个监听器Observer，用来监听所有属性。如果属性发上变化了，就需要告诉订阅者Watcher看是否需要更新。</p>
<p>因为订阅者是有很多个，所以我们需要有一个消息订阅器Dep来专门收集这些订阅者，然后在监听器Observer和订阅者Watcher之间进行统一管理的。</p>
<p>接着，我们还需要有一个指令解析器Compile，对每个节点元素进行扫描和解析，将相关指令对应初始化成一个订阅者Watcher，并替换模板数据或者绑定相应的函数，此时当订阅者Watcher接收到相应属性的变化，就会执行对应的更新函数，从而更新视图。</p>
<p>因此接下去我们执行以下3个步骤，实现数据的双向绑定：</p>
<blockquote>
<p>1.监听器Observer，用来劫持并监听所有属性，如果有变动的，就通知所有订阅者。</p>
<p>2.订阅者Watcher，可以收到属性的变化通知并执行相应的函数，从而更新视图。</p>
<p>3.解析器Compile，可以扫描和解析每个节点的相关指令，并根据初始化模板数据以及初始化相应的订阅者</p>
</blockquote>
<p><img src="vue%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A/1547815009579.png" alt="1547815009579"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/21/vue%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A/" data-id="ckdzwmbdj000r0wv05vrcbj26" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Git基本使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/21/Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" class="article-date">
  <time datetime="2019-01-21T07:12:14.000Z" itemprop="datePublished">2019-01-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/21/Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/">Git基本使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-Git基本使用"><a href="#1-Git基本使用" class="headerlink" title="1.Git基本使用"></a>1.Git基本使用</h2><h3 id="1-1-Git介绍"><a href="#1-1-Git介绍" class="headerlink" title="1.1 Git介绍"></a>1.1 Git介绍</h3><p>​    Git是目前世界上最先进的分布式版本控制系统（没有之一）。</p>
<p>​    那什么是版本控制系统？如果你用Microsoft Word写过长篇大论，那你一定有这样的经历：</p>
<p>​    想删除一个段落，又怕将来想恢复找不回来怎么办？有办法，先把当前文件“另存为……”一个新的Word文件，再接着改，改到一定程度，再“另存为……”一个新文件，这样一直改下去，最后你的Word文档变成了这样：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0.jpg" alt="lots-of-docs"></p>
<p>​    过了一周，你想找回被删除的文字，但是已经记不清删除前保存在哪个文件里了，只好一个一个文件去找，真麻烦。</p>
<p>​    于是你想，如果有一个软件，不但能自动帮我记录每次文件的改动，这个软件用起来就应该像这个样子，能记录每次文件的改动：</p>
<table>
<thead>
<tr>
<th>版本</th>
<th>文件名</th>
<th>用户</th>
<th>说明</th>
<th>日期</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>service.doc</td>
<td>张三</td>
<td>删除了软件服务条款5</td>
<td>7/12 10:38</td>
</tr>
<tr>
<td>2</td>
<td>service.doc</td>
<td>张三</td>
<td>增加了License人数限制</td>
<td>7/12 18:09</td>
</tr>
<tr>
<td>3</td>
<td>service.doc</td>
<td>李四</td>
<td>财务部门调整了合同金额</td>
<td>7/13 9:51</td>
</tr>
<tr>
<td>4</td>
<td>service.doc</td>
<td>张三</td>
<td>延长了免费升级周期</td>
<td>7/14 15:17</td>
</tr>
</tbody></table>
<p>​    这样，你就结束了手动管理多个“版本”的史前时代，进入到版本控制的20世纪。</p>
<h3 id="1-2-集中式vs分布式"><a href="#1-2-集中式vs分布式" class="headerlink" title="1.2 集中式vs分布式"></a>1.2 集中式vs分布式</h3><hr>
<p>​    Linus(git的作者)一直痛恨的CVS及SVN都是集中式的版本控制系统，而Git是分布式版本控制系统，集中式和分布式版本控制系统有什么区别呢？</p>
<p>​    先说集中式版本控制系统，版本库是集中存放在中央服务器的，而干活的时候，用的都是自己的电脑，所以要先从中央服务器取得最新的版本，然后开始干活，干完活了，再把自己的活推送给中央服务器。中央服务器就好比是一个图书馆，你要改一本书，必须先从图书馆借出来，然后回到家自己改，改完了，再放回图书馆。</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0-1544519246850.jpg" alt="central-repo"></p>
<p>​    集中式版本控制系统最大的毛病就是<strong>必须联网才能工作</strong>，如果在局域网内还好，带宽够大，速度够快，可如果在互联网上，遇到网速慢的话，可能提交一个10M的文件就需要5分钟，这还不得把人给憋死啊。</p>
<p>​    那分布式版本控制系统与集中式版本控制系统有何不同呢？</p>
<p>​    首先，分布式版本控制系统根本没有“中央服务器”，<strong>每个人的电脑上都是一个完整的版本库</strong>，这样，你工作的时候，就不需要联网了，因为版本库就在你自己的电脑上。<strong>在分布式版本控制系统通常也有一台充当“中央服务器”的电脑</strong>，但这个服务器的作用仅仅是用来方便“交换”大家的修改，没有它大家也一样干活，只是交换修改不方便而已。</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0-1544519250852.jpg" alt="distributed-repo"></p>
<p>​    和集中式版本控制系统相比，分布式版本控制系统的安全性要高很多，因为每个人电脑里都有完整的版本库，某一个人的电脑坏掉了不要紧，随便从其他人那里复制一个就可以了。而集中式版本控制系统的中央服务器要是出了问题，所有人都没法干活了。</p>
<h3 id="1-3-其他版本控制软件"><a href="#1-3-其他版本控制软件" class="headerlink" title="1.3 其他版本控制软件"></a>1.3 其他版本控制软件</h3><p>​    CVS作为最早的开源而且免费的集中式版本控制系统，直到现在还有不少人在用。由于CVS自身设计的问题，会造成提交文件不完整，版本库莫名其妙损坏的情况。同样是开源而且免费的SVN修正了CVS的一些稳定性问题，是目前用得最多的集中式版本库控制系统。</p>
<p>​    除了免费的外，还有收费的集中式版本控制系统，比如IBM的ClearCase（以前是Rational公司的，被IBM收购了），特点是安装比Windows还大，运行比蜗牛还慢，能用ClearCase的一般是世界500强，他们有个共同的特点是财大气粗，或者人傻钱多。</p>
<p>​    微软自己也有一个集中式版本控制系统叫VSS，集成在Visual Studio中。由于其反人类的设计，连微软自己都不好意思用了。</p>
<p>​    分布式版本控制系统除了Git以及促使Git诞生的BitKeeper外，还有类似Git的Mercurial和Bazaar等。这些分布式版本控制系统各有特点，但最快、最简单也最流行的依然是Git！</p>
<h3 id="1-4-在Windows上安装Git"><a href="#1-4-在Windows上安装Git" class="headerlink" title="1.4 在Windows上安装Git"></a>1.4 在Windows上安装Git</h3><p>​    在Windows上使用Git，可以从Git官网直接<a target="_blank" rel="noopener" href="https://git-scm.com/downloads">下载安装程序</a>，（网速慢的同学请移步<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1kU5OCOB#list/path=%2Fpub%2Fgit">国内镜像</a>），然后按默认选项安装即可。</p>
<p>​    安装完成后，在开始菜单里找到“Git”-&gt;“Git Bash”，蹦出一个类似命令行窗口的东西，就说明Git安装成功！</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0-1544519254942.jpg" alt="install-git-on-windows"></p>
<p>​    安装完成后，还需要最后一步设置，在命令行输入：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//因为Git是分布式版本控制系统，所以每个机器都必须自报家门：你的名字和Email地址</span></span><br><span class="line"></span><br><span class="line">$ git config --<span class="built_in">global</span> user.name <span class="string">&quot;Your Name&quot;</span></span><br><span class="line">$ git config --<span class="built_in">global</span> user.email <span class="string">&quot;email@example.com&quot;</span></span><br></pre></td></tr></table></figure>

<p>​    注意      <code>git config</code>命令的<code>--global</code>参数，用了这个参数，表示你这台机器上所有的Git仓库都会使用这个配置，当然也可以对某个仓库指定不同的用户名和Email地址。</p>
<h3 id="1-5-创建版本库"><a href="#1-5-创建版本库" class="headerlink" title="1.5 创建版本库"></a>1.5 创建版本库</h3><p>​    什么是版本库呢？版本库又名仓库，英文名<strong>repository</strong>，你可以简单理解成一个目录，这个目录里面的所有文件都可以被Git管理起来，每个文件的修改、删除，Git都能跟踪，以便任何时刻都可以追踪历史，或者在将来某个时刻可以“还原”。</p>
<h4 id="1-5-1-创建一个空目录"><a href="#1-5-1-创建一个空目录" class="headerlink" title="1.5.1 创建一个空目录"></a>1.5.1 创建一个空目录</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir learngit</span><br><span class="line">$ cd learngit</span><br></pre></td></tr></table></figure>

<h4 id="1-5-2-初始化仓库"><a href="#1-5-2-初始化仓库" class="headerlink" title="1.5.2 初始化仓库"></a>1.5.2 初始化仓库</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br><span class="line"></span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> /Users/michael/learngit/.git/</span><br></pre></td></tr></table></figure>

<p>​    瞬间Git就把仓库建好了，而且告诉你是一个空的仓库（empty Git repository），细心的读者可以发现当前目录下多了一个<code>.git</code>的目录，这个目录是Git来跟踪管理版本库的，没事千万不要手动修改这个目录里面的文件，不然改乱了，就把Git仓库给破坏了。</p>
<h3 id="1-6-Git常用操作"><a href="#1-6-Git常用操作" class="headerlink" title="1.6 Git常用操作"></a>1.6 Git常用操作</h3><p>​    使用Windows的童鞋要特别注意：千万不要使用Windows自带的<strong>记事本</strong>编辑任何文本文件。原因是Microsoft开发记事本的团队使用了一个非常弱智的行为来保存UTF-8编码的文件</p>
<p>​    现在我们在learngit目录下新建一个    <code>a.js</code>文件，内容如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;b&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="1-6-1-git-status"><a href="#1-6-1-git-status" class="headerlink" title="1.6.1 git status"></a>1.6.1 git status</h4><p>​     <code>git status</code>命令可以让我们时刻掌握仓库当前的状态</p>
<h4 id="1-6-2-git-add"><a href="#1-6-2-git-add" class="headerlink" title="1.6.2 git add"></a>1.6.2 git add</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add a.js    <span class="comment">//把文件添加到暂存区</span></span><br></pre></td></tr></table></figure>

<h4 id="1-6-3-git-commit"><a href="#1-6-3-git-commit" class="headerlink" title="1.6.3 git commit"></a>1.6.3 git commit</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m <span class="string">&quot;wrote a.js&quot;</span>    <span class="comment">//把文件提交到本地仓库</span></span><br><span class="line">[master (root-commit) eaadf4e] wrote a readme file</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">2</span> insertions(+)</span><br><span class="line"> create mode <span class="number">100644</span> a.js</span><br></pre></td></tr></table></figure>

<p>​    简单解释一下<code>git commit</code>命令，<code>-m</code>后面输入的是本次提交的说明，可以输入任意内容，当然最好是有意义的，这样你就能从历史记录里方便地找到改动记录。</p>
<h4 id="1-6-4-git-diff"><a href="#1-6-4-git-diff" class="headerlink" title="1.6.4 git diff"></a>1.6.4 git diff</h4><p>​    我们已经成功地添加并提交了一个a.js文件，于是我们继续修改a.js文件，改成如下内容：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;b&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;c&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>​    现在，运行   <code>git status</code>命令看看结果：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">    modified:  a.js</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>​    使用   <code>git diff</code>这个命令查看版本库的区别：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git diff a.js</span><br><span class="line">diff --git a/a.js b/a.js</span><br><span class="line">index <span class="number">46</span>d49bf.<span class="number">.9247</span>db6 <span class="number">100644</span></span><br><span class="line">--- a/a.js</span><br><span class="line">+++ b/a.js</span><br><span class="line">@@ <span class="number">-1</span>,<span class="number">2</span> +<span class="number">1</span>,<span class="number">2</span> @@</span><br><span class="line">-Git is a version control system.</span><br><span class="line">+Git is a distributed version control system.</span><br><span class="line"> Git is free software.</span><br></pre></td></tr></table></figure>

<p>​    使用下面命令将文件提交到仓库</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt</span><br><span class="line">$ git commit -m <span class="string">&quot;添加打印c&quot;</span></span><br><span class="line">$ git status</span><br><span class="line"><span class="comment">//Git告诉我们当前没有需要提交的修改，而且，工作目录是干净（working tree clean）的。    </span></span><br></pre></td></tr></table></figure>

<h2 id="2-时光穿梭"><a href="#2-时光穿梭" class="headerlink" title="2.时光穿梭"></a>2.时光穿梭</h2><h3 id="2-1-查看历史版本"><a href="#2-1-查看历史版本" class="headerlink" title="2.1 查看历史版本"></a>2.1 查看历史版本</h3><p>​    修改a.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;b&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;c&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;d&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>​    然后尝试提交：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git add a.js</span><br><span class="line">$ git commit -m <span class="string">&quot;添加打印d&quot;</span></span><br><span class="line">[master <span class="number">1094</span>adb] append GPL</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">1</span> insertion(+), <span class="number">1</span> deletion(-)</span><br></pre></td></tr></table></figure>

<p>​    在Git中，我们用   <code>git log --pretty=oneline</code>命令查看：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//git log    //显示最近到最远的提交日志</span></span><br><span class="line">git log --pretty=oneline    <span class="comment">//漂亮格式显示日志</span></span><br><span class="line"></span><br><span class="line"><span class="number">6975</span>a378a26354240b82a74bd32a94406cf666c3 (HEAD -&gt; master) 添加打印d</span><br><span class="line">e83249ed40a9790f899ec24aff1f1cddaa9669a2 <span class="string">&#x27;添加打印c&#x27;</span></span><br><span class="line">a97486ab8e00340bc48d833bd30ff9b6a7751b41 wrote a.js</span><br></pre></td></tr></table></figure>

<p>​     每提交一个新版本，实际上Git就会把它们自动串成一条时间线。如果使用可视化工具查看Git历史，就可以更清楚地看到提交历史的时间线：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/1546910711990.png" alt="1546910711990"></p>
<h3 id="2-2-版本回退"><a href="#2-2-版本回退" class="headerlink" title="2.2 版本回退"></a>2.2 版本回退</h3><p>​    用   <code>HEAD</code>表示当前版本</p>
<p>​    上一个版本就是<code>HEAD^</code></p>
<p>​    往上100个版本写成  <code>HEAD~100</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//回退到上一个版本</span></span><br><span class="line">$ git reset --hard HEAD^</span><br><span class="line">HEAD is now at e475afc add distributed</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用git log查看版本信息</span></span><br><span class="line">$ git log --pretty=oneline</span><br><span class="line">e83249ed40a9790f899ec24aff1f1cddaa9669a2 (HEAD -&gt; master) <span class="string">&#x27;添加打印c&#x27;</span></span><br><span class="line">a97486ab8e00340bc48d833bd30ff9b6a7751b41 wrote a.js</span><br></pre></td></tr></table></figure>

<h3 id="2-3-版本还原"><a href="#2-3-版本还原" class="headerlink" title="2.3 版本还原"></a>2.3 版本还原</h3><p>当我们使用git  log命令查看版本库的时候，我们发现最新的那个版本看不到了！如果此时我们想要回到最新版本，该怎么办呢？</p>
<p>​        Git提供了一个命令<code>git reflog</code>用来记录你的每一次命令：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git reflog</span><br><span class="line">e83249e (HEAD -&gt; master) HEAD@&#123;<span class="number">0</span>&#125;: reset: moving to HEAD^</span><br><span class="line"><span class="number">6975</span>a37 HEAD@&#123;<span class="number">1</span>&#125;: commit: 添加打印d</span><br><span class="line">e83249e (HEAD -&gt; master) HEAD@&#123;<span class="number">2</span>&#125;: commit: <span class="string">&#x27;添加打印c&#x27;</span></span><br><span class="line">a97486a HEAD@&#123;<span class="number">3</span>&#125;: commit (initial): wrote a.js</span><br></pre></td></tr></table></figure>

<p>​    使用下面命令就可以指定回到未来的某个版本：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard <span class="number">6975</span>a</span><br><span class="line">HEAD is now at <span class="number">6975</span>a37 添加打印d</span><br><span class="line"></span><br><span class="line"><span class="comment">//    版本号没必要写全，前几位就可以了，Git会自动去找。当然也不能只写前一两位，因为Git可能会找到多个版本号，就无法确定是哪一个了。</span></span><br></pre></td></tr></table></figure>

<p>​    Git的版本回退速度非常快，因为Git在内部有个指向当前版本的   <code>HEAD</code>指针，当你回退版本的时候，Git仅仅是把HEAD的指向改变了</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0-1544519271750.jpg" alt="git-head"></p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0-1544519274176.jpg" alt="git-head-move"></p>
<h2 id="3-工作区和缓存区"><a href="#3-工作区和缓存区" class="headerlink" title="3.工作区和缓存区"></a>3.工作区和缓存区</h2><p>​    Git和其他版本控制系统如SVN的一个不同之处就是有暂存区的概念。</p>
<p>​    先来看名词解释。</p>
<h3 id="3-1-工作区（Working-Directory）"><a href="#3-1-工作区（Working-Directory）" class="headerlink" title="3.1 工作区（Working Directory）"></a>3.1 工作区（Working Directory）</h3><p>​    就是你在电脑里能看到的目录，比如我的    <code>learngit</code>文件夹就是一个工作区：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/1581139350602.png" alt="1581139350602"></p>
<h3 id="3-2-暂存区和本地仓库（Repository）"><a href="#3-2-暂存区和本地仓库（Repository）" class="headerlink" title="3.2 暂存区和本地仓库（Repository）"></a>3.2 暂存区和本地仓库（Repository）</h3><p>​    工作区有一个隐藏目录   <code>.git</code>，这个不算工作区，而是Git的版本库。</p>
<p>​    Git的版本库里存了很多东西，其中最重要的就是称为stage（或者叫index）的暂存区，还有Git为我们自动创建的第一个分支<code>master</code>，以及指向<code>master</code>的一个指针叫<code>HEAD</code>。</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0-1544520027136.jpg" alt="git-repo"></p>
<p>​    分支和    <code>HEAD</code>的概念我们以后再讲。</p>
<p>​    前面讲了我们把文件往Git版本库里添加的时候，是分两步执行的：</p>
<p>​    第一步   <code>git add</code>把文件和文件修改添加到暂存区；</p>
<p>​    第二步   <code>git commit</code>把暂存区的所有内容提交到当前分支。</p>
<p>​    因为我们创建Git版本库时，Git自动为我们创建了唯一一个<code>master</code>分支，所以现在<code>git commit</code>就是往<code>master</code>分支上提交更改。</p>
<h3 id="3-3-工作区、暂存区和本地仓库详解"><a href="#3-3-工作区、暂存区和本地仓库详解" class="headerlink" title="3.3 工作区、暂存区和本地仓库详解"></a>3.3 工作区、暂存区和本地仓库详解</h3><p>​    修改a.js，创建b.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;b&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;c&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;d&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;e&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>​    先用   <code>git status</code>查看一下状态：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   a.js</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">        b.js</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>​    Git非常清楚地告诉我们，a.js被修改了，b.js是未跟踪状态。</p>
<p>​    使用git add *之后再查看状态</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git add *</span><br><span class="line">$ git status</span><br><span class="line"></span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   a.js</span><br><span class="line">        <span class="keyword">new</span> file:   b.js</span><br></pre></td></tr></table></figure>

<p>​    现在，暂存区的状态就变成这样了：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0-1544520023847.jpg" alt="git-stage"></p>
<p>​    所以，    <code>git add</code>命令实际上就是把要提交的所有修改放到暂存区（Stage）。然后执行<code>git commit</code>就可以一次性把暂存区的所有修改提交到分支。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m <span class="string">&#x27;新增b.js，a.js新增打印e&#x27;</span></span><br><span class="line">[master <span class="number">8261415</span>] 新增b.js，a.js新增打印e</span><br><span class="line"> <span class="number">2</span> files changed, <span class="number">2</span> insertions(+), <span class="number">1</span> deletion(-)</span><br><span class="line"> create mode <span class="number">100644</span> b.js</span><br></pre></td></tr></table></figure>

<p>​    一旦提交后，如果你又没有对工作区做任何修改，那么工作区就是“干净”的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">nothing to commit, working tree clean</span><br></pre></td></tr></table></figure>

<p>​    现在版本库变成了这样，暂存区就没有任何内容了：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0-1544520020528.jpg" alt="git-stage-after-commit"></p>
<h3 id="3-4-撤销修改"><a href="#3-4-撤销修改" class="headerlink" title="3.4 撤销修改"></a>3.4 撤销修改</h3><h4 id="3-4-1-撤销工作区的修改"><a href="#3-4-1-撤销工作区的修改" class="headerlink" title="3.4.1 撤销工作区的修改"></a>3.4.1 撤销工作区的修改</h4><p>​    继续修改a.js，当我们准备提交代码的时候，发现其中某行代码发生了错误，想要撤回到之前没有修改过的状态。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;b&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;c&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;d&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;e&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;哈哈&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;嘻嘻&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>​    我们使用   <code>git status</code>命令查看一下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   a.js</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>​    你可以发现，Git会告诉你，<code>git checkout -- file</code>可以丢弃工作区的修改：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$  git checkout -- a.js</span><br></pre></td></tr></table></figure>

<p>​    命令     <code> git checkout -- a.js</code>意思就是，把<code>a.js</code>文件在工作区的修改全部撤销，这里有两种情况：</p>
<p>​    一种是    <code>a.js</code>自修改后还没有被放到暂存区，现在撤销修改就回到和版本库一模一样的状态；</p>
<p>​    一种是   <code>a.js</code>已经添加到暂存区后同时作了修改，现在撤销修改就回到添加到暂存区后的状态。</p>
<p>​    总之，就是让这个文件回到最近一次      <code>git commit</code>或<code>git add</code>时的状态。</p>
<p>​    现在，看看    <code>readme.txt</code>的文件内容：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;b&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;c&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;d&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;e&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="3-4-2-撤销暂存区的修改"><a href="#3-4-2-撤销暂存区的修改" class="headerlink" title="3.4.2 撤销暂存区的修改"></a>3.4.2 撤销暂存区的修改</h4><p>​    假如我们在a.js中做了修改，并且使用   <code>git add</code>到暂存区了：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;b&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;c&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;d&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;e&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;哈哈&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;嘻嘻&quot;</span>)</span><br><span class="line"></span><br><span class="line">$ git add a.js</span><br></pre></td></tr></table></figure>

<p>​    接下来我们使用    <code>git status</code>查看一下，修改添加到了暂存区，还没有commit：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   a.js</span><br></pre></td></tr></table></figure>

<p>​    接下来Git告诉我们，用命令   <code>git reset HEAD &lt;file&gt;</code>可以把暂存区的修改撤销掉（unstage），重新放回工作区：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git reset HEAD a.js</span><br><span class="line">Unstaged changes after reset:</span><br><span class="line">M       a.js</span><br></pre></td></tr></table></figure>

<p>​         <code>git reset</code>命令既<strong>可以回退版本，也可以把暂存区的修改回退到工作区</strong>。当我们用<code>HEAD</code>时，表示最新的版本。</p>
<p>​    再用  <code>git status</code>查看一下，现在暂存区是干净的，工作区有修改：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   a.js</span><br></pre></td></tr></table></figure>

<h3 id="3-5-git-reset的三个参数"><a href="#3-5-git-reset的三个参数" class="headerlink" title="3.5 git reset的三个参数"></a>3.5 git reset的三个参数</h3><blockquote>
<p>三者的使用情况：</p>
<p>代码编写及修改是在工作区</p>
<p>git add 将本地修改添加到暂存区</p>
<p>git commit  将暂存区中的内容提交到本地仓库</p>
</blockquote>
<p><strong>git reset –hard HEAD^</strong></p>
<blockquote>
<p>三者的改变全都丢失，即代码的修改内容丢失</p>
</blockquote>
<p><strong>git reset –soft HEAD^</strong></p>
<blockquote>
<p>回退到git commit之前，此时处在暂存区。（即执行git add 命令后）</p>
</blockquote>
<p><strong>git reset –mixed HEAD^</strong>  </p>
<blockquote>
<p>就等于 git reset HEAD  回退到工作区，即git add 之前</p>
</blockquote>
<h3 id="3-6-删除"><a href="#3-6-删除" class="headerlink" title="3.6 删除"></a>3.6 删除</h3><p>​    要从版本库中删除该文件，那就用命令      <code>git rm</code>删掉，并且<code>git commit</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git rm a.js</span><br><span class="line">rm <span class="string">&#x27;a.js&#x27;</span></span><br><span class="line"></span><br><span class="line">$ git commit -m <span class="string">&quot;remove a.js&quot;</span></span><br><span class="line">[master d46f35e] remove a.js</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">1</span> deletion(-)</span><br><span class="line"> <span class="keyword">delete</span> mode <span class="number">100644</span> a.js</span><br></pre></td></tr></table></figure>

<p>​    现在，文件就从版本库中被删除了。</p>
<p>​    另一种情况是删错了，没有commit，此时版本库里还有呢，所以可以很轻松地把误删的文件恢复到最新版本：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git reset</span><br><span class="line">$ git checkout -- a.js</span><br></pre></td></tr></table></figure>

<p>​    <code>git checkout</code>其实是用版本库里的版本替换工作区的版本，无论工作区是修改还是删除，都可以“一键还原”。</p>
<h2 id="4-添加远程仓库"><a href="#4-添加远程仓库" class="headerlink" title="4.添加远程仓库"></a>4.添加远程仓库</h2><p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/2.png" alt="2"></p>
<h3 id="4-1-配置SSH"><a href="#4-1-配置SSH" class="headerlink" title="4.1 配置SSH"></a>4.1 配置SSH</h3><h4 id="4-1-1-创建SSH-Key"><a href="#4-1-1-创建SSH-Key" class="headerlink" title="4.1.1 创建SSH Key"></a>4.1.1 创建SSH Key</h4><p>​    在用户主目录下，看看有没有.ssh目录，如果有，再看看这个目录下有没有    <code>id_rsa</code>和<code>id_rsa.pub</code>这两个文件，如果已经有了，可直接跳到下一步。如果没有，打开Shell（Windows下打开Git Bash），创建SSH Key：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">&quot;mazg1987@163.com&quot;</span></span><br></pre></td></tr></table></figure>

<p>​    你需要把邮件地址换成你自己的邮件地址，然后一路回车，使用默认值即可，由于这个Key也不是用于军事目的，所以也无需设置密码。</p>
<p>​    如果一切顺利的话，可以在用户主目录里找    到<code>.ssh</code>目录，里面有<code>id_rsa</code>和<code>id_rsa.pub</code>两个文件，这两个就是SSH Key的秘钥对，<code>id_rsa</code>是私钥，不能泄露出去，<code>id_rsa.pub</code>是公钥，可以放心地告诉任何人。</p>
<h4 id="4-1-2-GitHub配置SSH-Keys"><a href="#4-1-2-GitHub配置SSH-Keys" class="headerlink" title="4.1.2 GitHub配置SSH Keys"></a>4.1.2 GitHub配置SSH Keys</h4><p>​    登陆GitHub，打开“Account settings”，“SSH Keys”页面：</p>
<p>​    然后，点“Add SSH Key”，填上任意Title，在Key文本框里粘贴    <code>id_rsa.pub</code>文件的内容：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0-1544575033986.png" alt="github-addkey-1"></p>
<p>​    点“Add Key”，你就应该看到已经添加的Key：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0-1544575229185.png" alt="github-addkey-2"></p>
<p>​    为什么GitHub需要SSH Key呢？因为GitHub需要识别出你推送的提交确实是你推送的，而不是别人冒充的，而Git支持SSH协议，所以，GitHub只要知道了你的公钥，就可以确认只有你自己才能推送。</p>
<p>​    当然，GitHub允许你添加多个Key。假定你有若干电脑，你一会儿在公司提交，一会儿在家里提交，只要把每台电脑的Key都添加到GitHub，就可以在每台电脑上往GitHub推送了。</p>
<h3 id="4-2-远程仓库"><a href="#4-2-远程仓库" class="headerlink" title="4.2 远程仓库"></a>4.2 远程仓库</h3><h4 id="4-2-1-建立远程仓库"><a href="#4-2-1-建立远程仓库" class="headerlink" title="4.2.1 建立远程仓库"></a>4.2.1 建立远程仓库</h4><p>​    首先，登陆GitHub，然后在右上角找到“Create a new repo”按钮，创建一个新的仓库。</p>
<p>​    在Repository name填入   <code>learngit</code>，其他保持默认设置，点击“Create repository”按钮，就成功地创建了一个新的Git仓库：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/1581145659597.png" alt="github-create-repo-2"></p>
<p>​    目前，在GitHub上的这个    <code>learngit</code>仓库还是空的，我们可以从这个仓库克隆出新的仓库，也可以把一个已有的本地仓库与之关联，然后，把本地仓库的内容推送到GitHub仓库。</p>
<h4 id="4-2-3-本地仓库和远程仓库关联"><a href="#4-2-3-本地仓库和远程仓库关联" class="headerlink" title="4.2.3 本地仓库和远程仓库关联"></a>4.2.3 本地仓库和远程仓库关联</h4><p>​    现在，我们根据GitHub的提示，在本地的   <code>learngit</code>仓库下运行命令：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add origin  git@github.com:mazg1987/learngit.git</span><br><span class="line"></span><br><span class="line"><span class="comment">//请千万注意，把上面的    mazg1987替换成你自己的GitHub账户名</span></span><br></pre></td></tr></table></figure>

<p>​    添加后，远程库的名字就是     <code>origin</code>，这是Git默认的叫法，也可以改成别的，但是<code>origin</code>这个名字一看就知道是远程库。</p>
<p>​    下一步，就可以把本地库的所有内容推送到远程库上,用     <code>git push</code>命令，实际上是把当前分支<code>master</code>推送到远程。</p>
<p>​    当我们在push时，加上-u参数，那么在下一次push时我们只需要写上   <code>git push</code>就能上传我们的代码。(加上-u之后，git会把当前分支与远程的指定的分支进行关联。git push origin master)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git push -u origin master</span><br><span class="line">Enumerating objects: <span class="number">3</span>, done.</span><br><span class="line">Counting objects: <span class="number">100</span>% (<span class="number">3</span>/<span class="number">3</span>), done.</span><br><span class="line">Writing objects: <span class="number">100</span>% (<span class="number">3</span>/<span class="number">3</span>), <span class="number">231</span> bytes | <span class="number">231.00</span> KiB/s, done.</span><br><span class="line">Total <span class="number">3</span> (delta <span class="number">0</span>), reused <span class="number">0</span> (delta <span class="number">0</span>)</span><br><span class="line">To github.com:mazg1987/learngit.git</span><br><span class="line"> * [<span class="keyword">new</span> branch]      master -&gt; master</span><br><span class="line">Branch <span class="string">&#x27;master&#x27;</span> set up to track remote branch <span class="string">&#x27;master&#x27;</span> <span class="keyword">from</span> <span class="string">&#x27;origin&#x27;</span>.</span><br></pre></td></tr></table></figure>

<p>​    推送成功后，可以立刻在GitHub页面中看到远程库的内容已经和本地一模一样：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/1581146172604.png" alt="github-repo"></p>
<p>​    从现在起，只要本地作了提交，就可以通过命令：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push</span><br></pre></td></tr></table></figure>

<h4 id="4-2-4-从远程仓库克隆"><a href="#4-2-4-从远程仓库克隆" class="headerlink" title="4.2.4 从远程仓库克隆"></a>4.2.4 从远程仓库克隆</h4><p>​    现在，假设我们从零开发，那么最好的方式是先创建远程库，然后从远程库克隆。</p>
<p>​    首先，登陆GitHub，创建一个新的仓库，名字叫   <code>gitskills</code>：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/1581146909231.png" alt="github-init-repo"></p>
<p>​    我们勾选      <code>Initialize this repository with a README</code>，这样GitHub会自动为我们创建一个<code>README.md</code>文件。创建完毕后，可以看到<code>README.md</code>文件：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/1581146979407.png" alt="github-init-repo-2"></p>
<p>​    现在，远程库已经准备好了，下一步是用命令    <code>git clone</code>克隆一个本地库：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git clone git@github.com:mazg1987/gitskills.git</span><br><span class="line">Cloning into <span class="string">&#x27;gitskills&#x27;</span>...</span><br><span class="line">remote: Enumerating objects: <span class="number">3</span>, done.</span><br><span class="line">remote: Counting objects: <span class="number">100</span>% (<span class="number">3</span>/<span class="number">3</span>), done.</span><br><span class="line">remote: Total <span class="number">3</span> (delta <span class="number">0</span>), reused <span class="number">0</span> (delta <span class="number">0</span>), pack-reused <span class="number">0</span></span><br><span class="line">Receiving objects: <span class="number">100</span>% (<span class="number">3</span>/<span class="number">3</span>), done.</span><br></pre></td></tr></table></figure>

<p>​    如果有多个人协作开发，那么每个人各自从远程克隆一份就可以了。</p>
<p>​    你也许还注意到，GitHub给出的地址不止一个，还可以用    <code>https://github.com/mazg/gitskills.git</code>这样的地址。实际上，Git支持多种协议，默认的<code>git://</code>使用ssh，但也可以使用<code>https</code>等其他协议。</p>
<p>​    使用    <code>https</code>除了速度慢以外，还有个最大的麻烦是每次推送都必须输入口令，但是在某些只开放http端口的公司内部就无法使用<code>ssh</code>协议而只能用<code>https</code>。</p>
<h4 id="4-2-5-SSH警告"><a href="#4-2-5-SSH警告" class="headerlink" title="4.2.5 SSH警告"></a>4.2.5 SSH警告</h4><p>​    当你第一次使用Git   的<code>clone</code>或者<code>push</code>命令连接GitHub时，会得到一个警告：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The authenticity <span class="keyword">of</span> host <span class="string">&#x27;github.com (xx.xx.xx.xx)&#x27;</span> can<span class="string">&#x27;t be established.</span></span><br><span class="line"><span class="string">RSA key fingerprint is xx.xx.xx.xx.xx.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no)?</span></span><br></pre></td></tr></table></figure>

<p>​    这是因为Git使用SSH连接，而SSH连接在第一次验证GitHub服务器的Key时，需要你确认GitHub的Key的指纹信息是否真的来自GitHub的服务器，输入<code>yes</code>回车即可。</p>
<p>​    Git会输出一个警告，告诉你已经把GitHub的Key添加到本机的一个信任列表里了：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Warning: Permanently added <span class="string">&#x27;github.com&#x27;</span> (RSA) to the list <span class="keyword">of</span> known hosts.</span><br></pre></td></tr></table></figure>

<p>​    这个警告只会出现一次，后面的操作就不会有任何警告了。    </p>
<h2 id="5-分支管理"><a href="#5-分支管理" class="headerlink" title="5.分支管理"></a>5.分支管理</h2><p>​    分支在实际中有什么用呢？假设你准备开发一个新功能，但是需要两周才能完成，第一周你写了50%的代码，如果立刻提交，由于代码还没写完，不完整的代码库会导致别人不能干活了。如果等代码全部写完再一次提交，又存在丢失每天进度的巨大风险。</p>
<p>​    现在有了分支，就不用怕了。你创建了一个属于你自己的分支，别人看不到，还继续在原来的分支上正常工作，而你在自己的分支上干活，想提交就提交，直到开发完毕后，再一次性合并到原来的分支上，这样既安全，又不影响别人工作。</p>
<p>​    其他版本控制系统如SVN等都有分支管理，但是用过之后你会发现，这些版本控制系统创建和切换分支比蜗牛还慢，简直让人无法忍受，结果分支功能成了摆设，大家都不去用。</p>
<p>​    但Git的分支是与众不同的，无论创建、切换和删除分支，Git在1秒钟之内就能完成！无论你的版本库是1个文件还是1万个文件。</p>
<h3 id="5-1-分支处理流程"><a href="#5-1-分支处理流程" class="headerlink" title="5.1 分支处理流程"></a>5.1 分支处理流程</h3><p>​    在<a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/0013744142037508cf42e51debf49668810645e02887691000">版本回退</a>里，你已经知道，每次提交，Git都把它们串成一条时间线，这条时间线就是一个分支，这个分支叫主分支，即<code>master</code>分支。</p>
<p>​    一开始的时候，<code>master</code>分支是一条线，Git用<code>master</code>指向最新的提交，再用<code>HEAD</code>指向<code>master</code>，就能确定当前分支，以及当前分支的提交点：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0-1544577251910.png" alt="git-br-initial"></p>
<p>​    每次提交，    <code>master</code>分支都会向前移动一步，这样，随着你不断提交，<code>master</code>分支的线也越来越长。</p>
<p>​    当我们创建新的分支，例如        <code>dev</code>时，Git新建了一个指针叫  <code>dev</code>，指向<code>master</code>相同的提交，再把<code>HEAD</code>指向<code>dev</code>，就表示当前分支在<code>dev</code>上：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0-1544577254691.png" alt="git-br-create"></p>
<p>​    你看，Git创建一个分支很快，因为除了增加一个     <code>dev</code>指针，改改<code>HEAD</code>的指向，工作区的文件都没有任何变化！</p>
<p>​    不过，从现在开始，对工作区的修改和提交就是针对     <code>dev</code>分支了，比如新提交一次后，<code>dev</code>指针往前移动一步，而<code>master</code>指针不变：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0-1544577257422.png" alt="git-br-dev-fd"></p>
<p>​    假如我们在        <code>dev</code>上的工作完成了，就可以把<code>dev</code>合并到<code>master</code>上。Git怎么合并呢？最简单的方法，就是直接把<code>master</code>指向<code>dev</code>的当前提交，就完成了合并：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0-1544577260162.png" alt="git-br-ff-merge"></p>
<p>​    所以Git合并分支也很快！就改改指针，工作区内容也不变！</p>
<p>​    合并完分支后，甚至可以删除       <code>dev</code>分支。删除<code>dev</code>分支就是把<code>dev</code>指针给删掉，删掉后，我们就剩下了一条<code>master</code>分支：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0-1544577266129.png" alt="git-br-rm"></p>
<h3 id="5-2-分支的创建和管理"><a href="#5-2-分支的创建和管理" class="headerlink" title="5.2 分支的创建和管理"></a>5.2 分支的创建和管理</h3><p>​    首先，我们创建     <code>dev</code>分支，然后切换到<code>dev</code>分支：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b dev</span><br><span class="line">S witched to a <span class="keyword">new</span> branch <span class="string">&#x27;dev&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// git checkout命令加上-b参数表示创建并切换，相当于以下两条命令：</span></span><br><span class="line"><span class="comment">// $ git branch dev</span></span><br><span class="line"><span class="comment">// $ git checkout dev</span></span><br><span class="line"><span class="comment">// Switched to branch &#x27;dev&#x27;</span></span><br></pre></td></tr></table></figure>

<p>​    然后，用  <code>git branch</code>命令查看当前分支：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git branch</span><br><span class="line">* dev</span><br><span class="line">  master</span><br><span class="line">  </span><br><span class="line"><span class="comment">//  git branch命令会列出所有分支，当前分支前面会标一个*号。</span></span><br></pre></td></tr></table></figure>

<p>​    然后我们就可以在   <code>dev</code>分支上正常提交，比如对a.js做个修改，加上两行：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;a&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;b&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;c&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;d&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;e&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;dev-a&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;dev-b&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>​    然后提交：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git add a.js </span><br><span class="line">$ git commit -m <span class="string">&quot;branch dev&quot;</span></span><br><span class="line">[dev b17d20e] branch test</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">1</span> insertion(+)</span><br></pre></td></tr></table></figure>

<p>​    现在，    <code>dev</code>分支的工作完成，我们就可以切换回<code>master</code>分支：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">Switched to branch <span class="string">&#x27;master&#x27;</span></span><br></pre></td></tr></table></figure>

<p>​    切换回      <code>master</code>分支后，再查看a.js文件，刚才添加的内容不见了！因为那个提交是在<code>dev</code>分支上，而<code>master</code>分支此刻的提交点并没有变：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/assets/0-1544577270651.png" alt="git-br-on-master"></p>
<p>​    现在，我们把      <code>dev</code>分支的工作成果合并到<code>master</code>分支上：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git merge dev</span><br><span class="line">Updating <span class="number">2e0</span>b193.<span class="number">.806923</span>e</span><br><span class="line">Fast-forward</span><br><span class="line"> a.js | <span class="number">4</span> +++-</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">3</span> insertions(+), <span class="number">1</span> deletion(-)</span><br><span class="line"></span><br><span class="line"><span class="comment">//   git merge命令用于合并指定分支到当前分支。合并后，再查看a.js的内容，就可以看到，和 dev分支的最新提交是完全一样的</span></span><br></pre></td></tr></table></figure>

<p>​    合并完成后，就可以放心地删除  <code>dev</code>分支了：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d dev</span><br><span class="line">Deleted branch dev (was b17d20e).</span><br></pre></td></tr></table></figure>

<p>​    删除后，查看     <code>branch</code>，就只剩下<code>master</code>分支了：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch</span><br><span class="line">* master</span><br></pre></td></tr></table></figure>

<p>​    因为创建、合并和删除分支非常快，所以Git鼓励你使用分支完成某个任务，合并后再删掉分支，这和直接在<code>master</code>分支上工作效果是一样的，但过程更安全。</p>
<h3 id="5-3-解决分支合并的冲突"><a href="#5-3-解决分支合并的冲突" class="headerlink" title="5.3 解决分支合并的冲突"></a>5.3 解决分支合并的冲突</h3><p>​    人生不如意之事十之八九，合并分支往往也不是一帆风顺的。</p>
<p>​    准备新的  <code>feature1</code>分支，继续我们的新分支开发：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b feature1</span><br><span class="line">Switched to a <span class="keyword">new</span> branch <span class="string">&#x27;feature1&#x27;</span></span><br></pre></td></tr></table></figure>

<p>​    修改   <code>a.js</code>最后一行，改为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;a&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;b&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;c&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;d&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;e&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;dev-a&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;dev-b&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;feature1&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>​    在   <code>feature1</code>分支上提交：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git add a.js</span><br><span class="line"></span><br><span class="line">$ git commit -m <span class="string">&quot;feature1&quot;</span></span><br><span class="line">[feature1 <span class="number">86</span>af60f] feature1</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">2</span> insertions(+), <span class="number">1</span> deletion(-)</span><br></pre></td></tr></table></figure>

<p>​    切换到   <code>master</code>分支：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">Switched to branch <span class="string">&#x27;master&#x27;</span></span><br></pre></td></tr></table></figure>

<p>​    在     <code>master</code>分支上把<code>a.js</code>文件的最后一行改为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;a&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;b&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;c&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;d&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;e&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;dev-a&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;dev-b&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;master&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>​    提交：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git add a.js</span><br><span class="line">$ git commit -m <span class="string">&quot;master&quot;</span></span><br><span class="line">[master <span class="number">0242</span>a7d] master</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">2</span> insertions(+), <span class="number">1</span> deletion(-)</span><br></pre></td></tr></table></figure>

<p>​    现在，    <code>master</code>分支和<code>feature1</code>分支各自都分别有新的提交，变成了这样：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0-1544582527189.png" alt="git-br-feature1"></p>
<p>​    这种情况下，Git无法执行“快速合并”，只能试图把各自的修改合并起来，但这种合并就可能会有冲突，我们试试看：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git merge feature1</span><br><span class="line">Auto-merging a.js</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> a.js</span><br><span class="line">Automatic merge failed; fix conflicts and then commit the result.</span><br></pre></td></tr></table></figure>

<p>​    果然冲突了！Git告诉我们，    <code>a.js</code>文件存在冲突，必须手动解决冲突后再提交。<code>git status</code>也可以告诉我们冲突的文件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">You have unmerged paths.</span><br><span class="line">  (fix conflicts and run <span class="string">&quot;git commit&quot;</span>)</span><br><span class="line">  (use <span class="string">&quot;git merge --abort&quot;</span> to abort the merge)</span><br><span class="line"></span><br><span class="line">Unmerged paths:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to mark resolution)</span><br><span class="line"></span><br><span class="line">        both modified:   a.js</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>​    我们可以直接查看a.js的内容：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;a&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;b&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;c&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;d&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;e&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;dev-a&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;dev-b&quot;</span>)</span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;master&quot;</span>)</span><br><span class="line">=======</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;feature1&quot;</span>)</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature1</span><br></pre></td></tr></table></figure>

<p>​    Git用        <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>，<code>=======</code>，<code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>标记出不同分支的内容，我们修改如下后保存：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;a&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;b&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;c&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;d&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;e&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;dev-a&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;dev-b&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;master&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>​    再提交：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git add a.js </span><br><span class="line">$ git commit -m <span class="string">&quot;conflict fixed&quot;</span></span><br><span class="line">[master cf810e4] conflict fixed</span><br></pre></td></tr></table></figure>

<p>​    现在，    <code>master</code>分支和<code>feature1</code>分支变成了下图所示：</p>
<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/0-1544582531605.png" alt="git-br-conflict-merged"></p>
<p>​    最后，删除   <code>feature1</code>分支：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d feature1</span><br><span class="line">Deleted branch feature1 (was <span class="number">14096</span>d0).</span><br></pre></td></tr></table></figure>

<h3 id="5-4-多人协作开发"><a href="#5-4-多人协作开发" class="headerlink" title="5.4 多人协作开发"></a>5.4 多人协作开发</h3><p>​    当你从远程仓库克隆时，实际上Git自动把本地的     <code>master</code>分支和远程的<code>master</code>分支对应起来了，并且远程仓库的默认名称是<code>origin</code>。</p>
<p>​    要查看远程库的信息，用   <code>git remote</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git remote</span><br><span class="line">origin</span><br><span class="line"></span><br><span class="line">$ git remote -v                <span class="comment">//   git remote -v显示更详细的信息</span></span><br><span class="line">origin  git@github.com:mazg/learngit.git (fetch)</span><br><span class="line">origin  git@github.com:mazg/learngit.git (push)</span><br></pre></td></tr></table></figure>

<p>​    上面显示了可以抓取和推送的   <code>origin</code>的地址。如果没有推送权限，就看不到push的地址。</p>
<h4 id="5-4-1-推送分支"><a href="#5-4-1-推送分支" class="headerlink" title="5.4.1 推送分支"></a>5.4.1 推送分支</h4><p>​    推送分支，就是把该分支上的所有本地提交推送到远程库。推送时要指定本地分支，这样Git就会把该分支推送到远程库对应的远程分支上：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push -u origin master      <span class="comment">//将master分支提交到远程仓库，第一次提交的时候需要加 -u</span></span><br></pre></td></tr></table></figure>

<p>​    如果要推送其他分支，比如   <code>dev</code>，就改成：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b dev</span><br><span class="line"><span class="comment">//创建一个新文件  c.js  </span></span><br><span class="line">$ git add c.js</span><br><span class="line">$ git commit -m <span class="string">&#x27;创建分支dev2&#x27;</span></span><br><span class="line"><span class="comment">//推送分支</span></span><br><span class="line">$ git push origin dev</span><br></pre></td></tr></table></figure>

<p><img src="Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/1581210187015.png" alt="1581210187015"></p>
<h4 id="5-4-2-抓取分支"><a href="#5-4-2-抓取分支" class="headerlink" title="5.4.2 抓取分支"></a>5.4.2 抓取分支</h4><p>​    多人协作时，大家都会往     <code>master</code>和<code>dev</code>分支上推送各自的修改。</p>
<p>​    现在，模拟一个你的小伙伴，可以在另一台电脑（注意要把SSH Key添加到GitHub）或者同一台电脑的另一个目录下克隆：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git clone git@github.com:mazg1987/learngit.git</span><br><span class="line">Cloning into <span class="string">&#x27;learngit&#x27;</span>...</span><br><span class="line">remote: Counting objects: <span class="number">40</span>, done.</span><br><span class="line">remote: Compressing objects: <span class="number">100</span>% (<span class="number">21</span>/<span class="number">21</span>), done.</span><br><span class="line">remote: Total <span class="number">40</span> (delta <span class="number">14</span>), reused <span class="number">40</span> (delta <span class="number">14</span>), pack-reused <span class="number">0</span></span><br><span class="line">Receiving objects: <span class="number">100</span>% (<span class="number">40</span>/<span class="number">40</span>), done.</span><br><span class="line">Resolving deltas: <span class="number">100</span>% (<span class="number">14</span>/<span class="number">14</span>), done.</span><br></pre></td></tr></table></figure>

<p>​    当你的小伙伴从远程库clone时，默认情况下，你的小伙伴只能看到本地的    <code>master</code>分支。不信可以用<code>git branch</code>命令看看：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch</span><br><span class="line">* master</span><br></pre></td></tr></table></figure>

<p>​    现在，你的小伙伴要在       <code>dev</code>分支上开发，就必须创建远程<code>origin</code>的<code>dev</code>分支到本地，于是他用这个命令创建本地<code>dev</code>分支：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b dev origin/dev</span><br></pre></td></tr></table></figure>

<p>​    现在，他就可以在        <code>dev</code>上继续修改，然后时不时地把<code>dev</code>分支<code>push</code>到远程：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//比如修改dev分支下c.js文件：</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;修改dev分支下的c.js&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git add c.js</span><br><span class="line">$ git commit -m <span class="string">&quot;修改dev分支下的c.js&quot;</span></span><br><span class="line">$ git push origin dev</span><br></pre></td></tr></table></figure>

<h4 id="5-4-3-分支推送冲突"><a href="#5-4-3-分支推送冲突" class="headerlink" title="5.4.3 分支推送冲突"></a>5.4.3 分支推送冲突</h4><p>你的小伙伴已经向  <code>origin/dev</code>分支推送了他的提交，而碰巧你也对同样的文件作了修改，并试图推送：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改dev分支下的c.js</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;张三修改dev分支下的c.js&quot;</span>)</span><br><span class="line"><span class="comment">//向dev分支提交修改</span></span><br><span class="line">$ git add c.js</span><br><span class="line">$ git commit -m <span class="string">&quot;张三修改dev分支下的c.js&quot;</span></span><br><span class="line"><span class="comment">//推送到远程仓库的dev分支</span></span><br><span class="line">$ git push origin dev</span><br><span class="line"><span class="comment">//推送报错</span></span><br><span class="line">To github.com:mazg1987/learngit.git</span><br><span class="line"> ! [rejected]        dev -&gt; dev (fetch first)</span><br><span class="line">error: failed to push some refs to <span class="string">&#x27;git@github.com:mazg1987/learngit.git&#x27;</span></span><br><span class="line">hint: Updates were rejected because the remote contains work that you <span class="keyword">do</span></span><br><span class="line">hint: not have locally. This is usually caused by another repository pushing</span><br><span class="line">hint: to the same ref. You may want to first integrate the remote changes</span><br><span class="line">hint: (e.g., <span class="string">&#x27;git pull ...&#x27;</span>) before pushing again.</span><br><span class="line">hint: See the <span class="string">&#x27;Note about fast-forwards&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;git push --help&#x27;</span> <span class="keyword">for</span> details.</span><br></pre></td></tr></table></figure>

<p>​    推送失败，因为你的小伙伴的最新提交和你试图推送的提交有冲突，解决办法也很简单，Git已经提示我们，先用<code>git pull</code>把最新的提交从<code>origin/dev</code>抓下来，然后在本地合并，解决冲突再推送：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ git pull</span><br><span class="line">remote: Enumerating objects: <span class="number">5</span>, done.</span><br><span class="line">remote: Counting objects: <span class="number">100</span>% (<span class="number">5</span>/<span class="number">5</span>), done.</span><br><span class="line">remote: Compressing objects: <span class="number">100</span>% (<span class="number">1</span>/<span class="number">1</span>), done.</span><br><span class="line">remote: Total <span class="number">3</span> (delta <span class="number">1</span>), reused <span class="number">3</span> (delta <span class="number">1</span>), pack-reused <span class="number">0</span></span><br><span class="line">Unpacking objects: <span class="number">100</span>% (<span class="number">3</span>/<span class="number">3</span>), done.</span><br><span class="line">From github.com:mazg1987/learngit</span><br><span class="line">   <span class="number">5</span>d981b2.<span class="number">.5</span>f6d427  dev        -&gt; origin/dev</span><br><span class="line">There is no tracking information <span class="keyword">for</span> the current branch.</span><br><span class="line">Please specify which branch you want to merge <span class="keyword">with</span>.</span><br><span class="line">See git-pull(<span class="number">1</span>) <span class="keyword">for</span> details.</span><br><span class="line"></span><br><span class="line">    git pull &lt;remote&gt; <span class="xml"><span class="tag">&lt;<span class="name">branch</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">If you wish to set tracking information for this branch you can do so with:</span></span><br><span class="line"></span><br><span class="line">    git branch --set-upstream-to=origin/&lt;branch&gt; dev</span><br><span class="line"></span><br><span class="line">//如果git pull提示no tracking information，则说明本地分支和远程分支的链接关系没有创建，用命令git branch --set-upstream-to &lt;branch-name&gt; origin/&lt;branch-name&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//通过 git branch -vv 命令查看本地仓库和远程仓库建立连接的关系</span></span><br><span class="line">$ git branch -vv    </span><br><span class="line"><span class="comment">//使本地的dev分支和远程origin/dev仓库建立连接</span></span><br><span class="line">$ git branch --set-upstream-to=origin/dev dev</span><br><span class="line">Branch <span class="string">&#x27;dev&#x27;</span> set up to track remote branch <span class="string">&#x27;dev&#x27;</span> <span class="keyword">from</span> <span class="string">&#x27;origin&#x27;</span>.</span><br></pre></td></tr></table></figure>

<p>​    再pull：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git pull</span><br><span class="line">Auto-merging c.js</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> c.js</span><br><span class="line">Automatic merge failed; fix conflicts and then commit the result.</span><br></pre></td></tr></table></figure>

<p>​    这回   <code>git pull</code>成功，但是合并有冲突，查看dev分支下的c.js文件内容如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;张三修改dev分支下的c.js&quot;</span>)</span><br><span class="line">=======</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;修改dev分支下的c.js&quot;</span>)</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; <span class="number">5</span>f6d4274f367c7ddc41f3175937e5018acc130ec</span><br></pre></td></tr></table></figure>

<p>​    需要手动解决冲突，解决的方法和分支管理中的<a target="_blank" rel="noopener" href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001375840202368c74be33fbd884e71b570f2cc3c0d1dcf000">解决冲突</a>完全一样，修改dev分支下的c.js内容如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;张三修改dev分支下的c.js&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;修改dev分支下的c.js&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>​    解决后提交，再push：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将修改的文件提交到本地dev分支</span></span><br><span class="line">$ git add c.js</span><br><span class="line">$ git commit -m <span class="string">&#x27;解决分支冲突问题&#x27;</span></span><br><span class="line"><span class="comment">//将本地dev分支的修改提交到远程仓库</span></span><br><span class="line">$ git push</span><br><span class="line">Enumerating objects: <span class="number">10</span>, done.</span><br><span class="line">Counting objects: <span class="number">100</span>% (<span class="number">10</span>/<span class="number">10</span>), done.</span><br><span class="line">Delta compression using up to <span class="number">4</span> threads</span><br><span class="line">Compressing objects: <span class="number">100</span>% (<span class="number">5</span>/<span class="number">5</span>), done.</span><br><span class="line">Writing objects: <span class="number">100</span>% (<span class="number">6</span>/<span class="number">6</span>), <span class="number">657</span> bytes | <span class="number">657.00</span> KiB/s, done.</span><br><span class="line">Total <span class="number">6</span> (delta <span class="number">2</span>), reused <span class="number">0</span> (delta <span class="number">0</span>)</span><br><span class="line">remote: Resolving deltas: <span class="number">100</span>% (<span class="number">2</span>/<span class="number">2</span>), completed <span class="keyword">with</span> <span class="number">1</span> local object.</span><br><span class="line">To github.com:mazg1987/learngit.git</span><br><span class="line">   <span class="number">5</span>f6d427.<span class="number">.2</span>d79013  dev -&gt; dev</span><br></pre></td></tr></table></figure>

<h4 id="5-4-4-多人协作开发工作模式总结"><a href="#5-4-4-多人协作开发工作模式总结" class="headerlink" title="5.4.4 多人协作开发工作模式总结"></a>5.4.4 多人协作开发工作模式总结</h4><ul>
<li>可以试图用git push origin <branch-name>推送自己的修改；</li>
<li>如果推送失败，则因为远程分支比你的本地更新，需要先用git pull试图合并；</li>
<li>如果合并有冲突，则解决冲突，并在本地提交；</li>
<li>没有冲突或者解决掉冲突后，再用git push origin <branch-name>推送就能成功！</li>
</ul>
<h2 id="6-配置忽略文件"><a href="#6-配置忽略文件" class="headerlink" title="6.配置忽略文件"></a>6.配置忽略文件</h2><p>​    有些时候，你必须把某些文件放到Git工作目录中，但又不能提交它们，比如保存了数据库密码的配置文件等，每次<code>git status</code>都会显示<code>Untracked files ...</code>，有强迫症爽。</p>
<p>​    好在Git考虑到了大家的感受，这个问题解决起来也很简单，在Git工作区的根目录下创建一个特殊的<code>.gitignore</code>文件，然后把要忽略的文件名填进去，Git就会自动忽略这些文件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">忽略文件的原则是：</span><br><span class="line"><span class="number">1.</span> 忽略操作系统自动生成的文件，比如缩略图等；</span><br><span class="line"><span class="number">2.</span> 忽略编译生成的中间文件、可执行文件等，也就是如果一个文件是通过另一个文件自动生成的，那自动生成的文件就没必要放进版本库，比如Java编译产生的.class文件；</span><br><span class="line"><span class="number">3.</span> 忽略你自己的带有敏感信息的配置文件，比如存放口令的配置文件。</span><br><span class="line"><span class="number">4.</span> 第三方包</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.在项目根目录下创建  .gitignore 文件</span></span><br><span class="line"><span class="comment">//2.在.gitignore中输入内容如下</span></span><br><span class="line">.DS_Store</span><br><span class="line">node_modules/</span><br><span class="line">dist/</span><br><span class="line">npm-debug.log*</span><br><span class="line">yarn-debug.log*</span><br><span class="line">yarn-error.log*</span><br><span class="line">.idea</span><br><span class="line"><span class="comment">//3.将gitignore提交到仓库</span></span><br><span class="line">$ git add .gitignore</span><br><span class="line">$ git commit -m <span class="string">&#x27;gitignore&#x27;</span></span><br><span class="line"><span class="comment">//4.通过git status查看是否  working tree clean</span></span><br></pre></td></tr></table></figure>

<p>​    有些时候不需要从头写   <code>.gitignore</code>文件，GitHub已经为我们准备了各种配置文件，只需要组合一下就可以使用了。所有配置文件可以直接在线浏览：<a target="_blank" rel="noopener" href="https://github.com/github/gitignore">https://github.com/github/gitignore</a></p>
<h2 id="7-gitlab"><a href="#7-gitlab" class="headerlink" title="7.gitlab"></a>7.gitlab</h2><p>​    对于第三方代码仓库托管服务有很多，其中 Github 最火，但是如果想要托管私有项目收费比较高，而且在国内受限于网络环境影响，鲜少有公司使用。</p>
<p>​    也有的公司，例如京东、淘宝这种级别的公司，也不太常用别的第三方的托管服务。</p>
<p>​    Gitlab 是一个开源的类似于 Github 的一个系统，开源免费部署到自己的公司内容。</p>
<p>​    <a target="_blank" rel="noopener" href="http://blog.51cto.com/caiyuanji/2114796?cid=707746">http://blog.51cto.com/caiyuanji/2114796?cid=707746</a></p>
<h2 id="8-参考文章"><a href="#8-参考文章" class="headerlink" title="8.参考文章"></a>8.参考文章</h2><p><a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/896043488029600">https://www.liaoxuefeng.com/wiki/896043488029600</a></p>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2">https://git-scm.com/book/zh/v2</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/01/21/Git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" data-id="ckdzwmbdv001s0wv026ee2pii" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-css和js是如何堵塞dom渲染的" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/20/css%E5%92%8Cjs%E6%98%AF%E5%A6%82%E4%BD%95%E5%A0%B5%E5%A1%9Edom%E6%B8%B2%E6%9F%93%E7%9A%84/" class="article-date">
  <time datetime="2019-01-20T05:17:51.000Z" itemprop="datePublished">2019-01-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/20/css%E5%92%8Cjs%E6%98%AF%E5%A6%82%E4%BD%95%E5%A0%B5%E5%A1%9Edom%E6%B8%B2%E6%9F%93%E7%9A%84/">css和js是如何堵塞dom渲染的</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>浏览器是解析<code>DOM</code>生成<code>DOM Tree</code>，结合<code>CSS</code>生成的<code>CSS Tree</code>，最终组成<code>render tree</code>，再渲染页面。</p>
<p>1.CSS不会堵塞DOM解析(DOM Tree的生成)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./css/sleep3000-common.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span> <span class="attr">src</span>=<span class="string">&quot;./js/logDiv.js&quot;</span>&quot;&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                                                            </span><br><span class="line">#1.sleep3000-common.css 会延迟3秒钟返回，样式就是设置div块为浅蓝色</span><br><span class="line">   div&#123;backgroundColor:lightBlue&#125;  </span><br><span class="line">#2.logDiv.js 代码如下，script标签加defer的含义是该脚本将在文档完成解析后，触发           DOMContentLoaded 事件前执行</span><br><span class="line">   const div = document.querySelector(&#x27;div&#x27;);</span><br><span class="line">   console.log(div);</span><br><span class="line"> #3.执行结果</span><br><span class="line"> 先打印出div这个DOM节点，过3s左右之后才渲染出一个浅蓝色的div。</span><br><span class="line"> 这就证明了CSS 是不会阻塞 DOM 的解析的，尽管CSS下载需要3s，但这个过程中，浏览器不会傻等着CSS下载完，而是会解析DOM的。          </span><br></pre></td></tr></table></figure>

<p>2.CSS会堵塞页面的渲染</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">    &lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">        &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">        &lt;style&gt;</span><br><span class="line">            div &#123;</span><br><span class="line">                width: <span class="number">100</span>px;</span><br><span class="line">                height: <span class="number">100</span>px;</span><br><span class="line">                background: lightgreen;</span><br><span class="line">            &#125;</span><br><span class="line">        &lt;/style&gt;</span><br><span class="line">        &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;/css/sleep3000-common.css&quot;</span>&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;div&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line"> &lt;/html&gt;</span><br><span class="line"></span><br><span class="line">#1.sleep3000-common.css 会延迟3ms返回，样式就是设置div块为浅蓝色</span><br><span class="line">#2.最终结果是浏览器会转圈圈三秒，之后呈现出一个浅蓝色的div，所以结果是CSS会堵塞页面的渲染。</span><br></pre></td></tr></table></figure>

<p>3.JS会堵塞DOM解析</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">    &lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">        &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">        &lt;script src=<span class="string">&quot;/js/blok.js&quot;</span>&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;div&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line"> &lt;/html&gt;</span><br><span class="line"></span><br><span class="line">#1.block.js代码如下</span><br><span class="line"><span class="keyword">const</span> arr = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10000000</span>; i++) &#123;</span><br><span class="line">  arr.push(i);</span><br><span class="line">  arr.splice(i % <span class="number">3</span>, i % <span class="number">7</span>, i % <span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> div = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(div)</span><br><span class="line">#2.最终结果浏览器转圈圈一会，这过程中不会有任何东西出现，之后打印出null。说明JS堵塞了DOM解析。</span><br><span class="line">#3.如果JS文件体积太大，同时你确定没必要阻塞DOM解析的话，不妨按需要加上defer或者async属性，此时脚本下载的过程中是不会阻塞DOM解析的。</span><br></pre></td></tr></table></figure>

<p>4.浏览器遇到 <script>且没有<code>defer</code>或<code>async</code>属性的标签时，会触发页面渲染。如果<script>标签前面有CSS资源，会等到CSS资源加载完毕之后再执行<script>脚本</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;./css/sleep3000-common.css&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div&gt;&lt;/div&gt;</span><br><span class="line">    &lt;script src=<span class="string">&quot;/js/logDiv.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        div &#123;</span><br><span class="line">            background: lightgrey;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">    &lt;script src=<span class="string">&quot;/js/sleep5000-logDiv.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;/css/sleep3000-common.css&quot;</span>&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#答案是等待3秒浅蓝色打印div，等待5秒浅灰色打印div，最后浅蓝色。由此可见，每次碰到&lt;script&gt;标签时，浏览器都会渲染一次页面。这是基于同样的理由，浏览器不知道脚本的内容，因而碰到脚本时，只好先渲染页面，确保脚本能获取到最新的DOM元素信息，尽管脚本可能不需要这些信息。</span><br></pre></td></tr></table></figure>

<p>5.优化方案：</p>
<p><code>&lt;script&gt;</code>最好放底部，<code>&lt;link&gt;</code>最好放头部，如果头部同时有<code>&lt;script&gt;</code>与<code>&lt;link&gt;</code>的情况下，最好将<code>&lt;script&gt;</code>放在<code>&lt;link&gt;</code>上面</p>
<p>6.附：defer 与 async</p>
<p>如果我们不想<script>堵塞页面的解析，我们可以给<script>标签添加defer或者async属性。defer和async的区别主要如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.执行时机不同：</span><br><span class="line">    defer的脚本将在DOM解析完成后、触发 DOMContentLoaded 事件前执行</span><br><span class="line">    async的脚本一旦加载完毕，就会执行(不论是在DOM解析阶段还是DOMContentLoaded之前之后，但是一定是在window.load之前执行)</span><br><span class="line">2.执行顺序不同：</span><br><span class="line">    defer能保证多个脚本按照书写顺序执行</span><br><span class="line">    async不能保证多个脚本的执行顺序</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/01/20/css%E5%92%8Cjs%E6%98%AF%E5%A6%82%E4%BD%95%E5%A0%B5%E5%A1%9Edom%E6%B8%B2%E6%9F%93%E7%9A%84/" data-id="ckdzwmbd700030wv05t0i85nl" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-js垃圾回收机制" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/30/js%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/" class="article-date">
  <time datetime="2018-06-30T08:19:37.000Z" itemprop="datePublished">2018-06-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/react/">react</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/30/js%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/">js垃圾回收机制</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h2><p>“垃圾回收”是将程序中不再使用的内存空间进行回收的通俗说法。</p>
<p>C++等于语言的回收机制是由程序员编写<strong>析构函数</strong>进行垃圾回收</p>
<p>java等语言中的回收机制是<strong>由系统完成</strong>，无需程序员考虑</p>
<p>而javascript的回收机制就属于<strong>由系统完成回收</strong>。而细分javascript的回收机制又有两种：标记清除法、引用计数法。其中标记清除法现是主流，而引用计数法是在低版本的IE浏览器中使用。</p>
<h2 id="二、引用计数法"><a href="#二、引用计数法" class="headerlink" title="二、引用计数法"></a>二、引用计数法</h2><p>简而言之就是一个对象被引用几次，那么它的引用计数就是几。而javascript中的回收机制会实时扫描对象的引用计数是0时就回收此对象。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A ---------&gt; B ---------&gt; C</span><br><span class="line">&#x2F;&#x2F;例如对象A有一个属性指向B，而B也有一个属性指向C。即使当前作用域中只有对象A有效，但由于指针的关系所有3个对象都必须保留在内存中。当离开A的当前作用域时（例如代码执行到声明A的函数的末尾处），垃圾收集器就可以释放A占用的内存。此时，由于没有什么指向B，因此B可以释放，最后，C也可以释放。</span><br></pre></td></tr></table></figure>

<p>但此方法会发生内存泄露的问题</p>
<h3 id="内存泄漏"><a href="#内存泄漏" class="headerlink" title="内存泄漏"></a>内存泄漏</h3><p>内存泄漏是指程序中己动态分配的<strong>堆内存</strong>由于某种原因程序未释放或无法释放，造成系统内存的浪费，导致程序运行速度减慢甚至系统崩溃等严重后果。</p>
<p>若有如下引用关系</p>
<p><img src="js%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/1.png" alt="循环引用"></p>
<p>B引用了C，C引用了B，构成循环引用，则它们的引用计数最低为1，则不会被回收机制回收（尽管它们对于程序的运行无任何作用）。</p>
<p>当使用引用计数法垃圾回收机制时，若内存中存在两个或多个对象的引用链形成回路时，则此时发生<strong>循环引用</strong>，系统无法释放该内存，而导致内存泄漏，这是内存泄露的一种。</p>
<h3 id="循环引用以及解决办法"><a href="#循环引用以及解决办法" class="headerlink" title="循环引用以及解决办法"></a>循环引用以及解决办法</h3><h4 id="闭包发生循环引用"><a href="#闭包发生循环引用" class="headerlink" title="闭包发生循环引用"></a>闭包发生循环引用</h4><p>例1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function outerfn()&#123;</span><br><span class="line">    var obj &#x3D; &#123;</span><br><span class="line">        name: &quot;张三&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    function innerfn()&#123;</span><br><span class="line">        return obj;</span><br><span class="line">    &#125;</span><br><span class="line">    obj.objfn &#x3D; innerfn;</span><br><span class="line">        return innerfn;</span><br><span class="line">    &#125;;</span><br><span class="line">    console.log(outerfn()());</span><br><span class="line">&#x2F;&#x2F;此情况中 innerfn函数引用了obj  obj中也引用了innerfn  此时构成循环引用</span><br><span class="line">&#x2F;&#x2F;解决办法 去除obj.objfn &#x3D; innerfn;</span><br></pre></td></tr></table></figure>

<p>例2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function outerfn()&#123;</span><br><span class="line">    var obj &#x3D; &#123;</span><br><span class="line">        name: &quot;张三&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    function innerfn()&#123;</span><br><span class="line">        return &#39;in&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">    obj.objfn &#x3D; innerfn;</span><br><span class="line">    return innerfn;</span><br><span class="line">&#125;;</span><br><span class="line">console.log(outerfn()());</span><br><span class="line">&#x2F;&#x2F;此情况中 innerfn函数虽未直接引用obj  但是却存在隐式引用  obj中引用了innerfn  此时构成循环引用</span><br><span class="line">&#x2F;&#x2F;解决办法 去除obj.objfn &#x3D; innerfn;</span><br></pre></td></tr></table></figure>

<h4 id="DOM与JavaScript的循环引用"><a href="#DOM与JavaScript的循环引用" class="headerlink" title="DOM与JavaScript的循环引用"></a>DOM与JavaScript的循环引用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">window.onload &#x3D; function()&#123;</span><br><span class="line">    var box &#x3D; document.ElementById(&#39;box&#39;);</span><br><span class="line">    box.onclick &#x3D; function()&#123;</span><br><span class="line">        &#x2F;&#x2F;打印box</span><br><span class="line">        console.log(box);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;此情况中 onclick函数引用了box(打印box)  box引用了onclick(box.onclick)  此时构成循环引用</span><br><span class="line">&#x2F;&#x2F;解决办法  将内部函数的声明写在外部函数的外面</span><br><span class="line">window.onload &#x3D; function()&#123;</span><br><span class="line">    var box &#x3D; document.ElementById(&#39;box&#39;);</span><br><span class="line">    box.onclick &#x3D; doOnclick;</span><br><span class="line">&#125;</span><br><span class="line">function doOnclick()&#123;</span><br><span class="line">    console.log(this);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>引用计数法的内存泄漏问题严重(已被大量浏览器抛弃使用)，所以有了标记清除发来解决这一问题。</p>
<h2 id="三、标记清除法"><a href="#三、标记清除法" class="headerlink" title="三、标记清除法"></a>三、标记清除法</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p> 大部分浏览器以此方式进行垃圾回收，当变量进入执行环境（函数中声明变量）的时候，垃圾回收器将其标记为“进入环境”，当变量离开环境的时候（函数执行结束）将其标记为“离开环境”，在离开环境之后还有的变量则是需要被删除的变量。标记方式不定，可以是某个特殊位的反转或维护一个列表等。</p>
<p>标记清除算法由以下步骤组成：<br>1.垃圾回收器构建”roots”列表。Roots通常是代码中保留引用的全局变量。在JavaScript中，”window”对象可以作为 root 全局变量示例。<br>2.所有的”roots”被检查并标记为active（即不是垃圾）。所有的children也被递归检查。从”root”能够到达的一切都不被认为是垃圾。<br>3.所有为不被标记为active的内存可以被认为是垃圾了。收集器限制可以释放这些内存并将其返回到操作系统</p>
<p>PS：类似与数据结构中图的深度优先遍历形成一个连通图。而不在连通图中的节点就会被释放。</p>
<p><img src="js%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/2.gif" alt="标记清除法"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/30/js%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/" data-id="ckdzwmbdd000c0wv00ul6c7gi" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-微信公众号开发" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/12/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/" class="article-date">
  <time datetime="2018-06-12T07:39:44.000Z" itemprop="datePublished">2018-06-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/12/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/">微信公众号开发</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="1-微信公众号开发"><a href="#1-微信公众号开发" class="headerlink" title="1.微信公众号开发"></a>1.微信公众号开发</h1><h2 id="1-1-公众号分类"><a href="#1-1-公众号分类" class="headerlink" title="1.1 公众号分类"></a>1.1 公众号分类</h2><ul>
<li>微信公众平台是腾讯旗下的一个平台，微信公众平台中有以下三种<a target="_blank" rel="noopener" href="https://www.baidu.com/s?wd=%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao">微信公众号</a>类型：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1、订阅号</span><br><span class="line">2、服务号</span><br><span class="line">3、企业号：企业号多半是企业内容使用，用于管理员工通讯，方便员工通讯，信息集合和消息通知等功能，相当与一个移动的小型oa系统了。一般不用来对外宣传推广</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1570007801353.png" alt="1570007801353"></p>
<p><img src="%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1570007831333.png" alt="1570007831333"></p>
<ul>
<li><p>服务号和订阅号的区别：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.出现的位置不同</span><br><span class="line">2.单月发送的消息数量不同，订阅号每天1篇，服务号每月4篇</span><br><span class="line">3.订阅号没有9大接口和支付功能</span><br><span class="line">   9大接口包括：语音识别、客服接口、OAuth 2.0网页授权、生成带参数的二维码、获取用户地理位置、获取用户基本信息、获取关注者列表、用户分组接口、上传和下载多媒体文件</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>微信公众号认证账号和非认证账号的区别：认证账号就是可以在添加好友里根据名字搜索到该账号</p>
</blockquote>
</li>
</ul>
<h2 id="1-2-公众号注册"><a href="#1-2-公众号注册" class="headerlink" title="1.2 公众号注册"></a>1.2 公众号注册</h2><p><img src="%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1570007773539.png" alt="1570007773539"></p>
<p><img src="%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1570007910010.png" alt="1570007910010"></p>
<h2 id="1-3-微信公众号基本功能"><a href="#1-3-微信公众号基本功能" class="headerlink" title="1.3 微信公众号基本功能"></a>1.3 微信公众号基本功能</h2><h3 id="1-3-1-自动回复"><a href="#1-3-1-自动回复" class="headerlink" title="1.3.1 自动回复"></a>1.3.1 自动回复</h3><p><a target="_blank" rel="noopener" href="https://kf.qq.com/faq/161221FZnEfe161221Ibmamq.html">https://kf.qq.com/faq/161221FZnEfe161221Ibmamq.html</a></p>
<p><img src="%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1570008312002.png" alt="1570008312002"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">收到消息回复在一小时内只能回复一到两条，所有有必要设置关键词回复</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-2-自定义菜单"><a href="#1-3-2-自定义菜单" class="headerlink" title="1.3.2 自定义菜单"></a>1.3.2 自定义菜单</h3><p><a target="_blank" rel="noopener" href="http://classic.getemoji.com/">http://classic.getemoji.com/</a> 可以在这个网址中选择对应的图标，给菜单的名字添加图标</p>
<p><img src="%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1570009469509.png" alt="1570009469509"></p>
<p><img src="%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1570009558069.png" alt="1570009558069"></p>
<p><img src="%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1570009718993.png" alt="1570009718993"></p>
<p><img src="%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1570009813005.png" alt="1570009813005"></p>
<h3 id="1-3-3-投票管理"><a href="#1-3-3-投票管理" class="headerlink" title="1.3.3 投票管理"></a>1.3.3 投票管理</h3><p><img src="%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1576461102561.png" alt="1576461102561"></p>
<p>投票管理需要插入到对应的文章后才能生效</p>
<h3 id="1-3-4-页面模板使用"><a href="#1-3-4-页面模板使用" class="headerlink" title="1.3.4 页面模板使用"></a>1.3.4 页面模板使用</h3><h4 id="a-添加页面模板"><a href="#a-添加页面模板" class="headerlink" title="a) 添加页面模板"></a>a) 添加页面模板</h4><p><img src="%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1576463387072.png" alt="1576463387072"></p>
<h4 id="b-绑定页面模板"><a href="#b-绑定页面模板" class="headerlink" title="b) 绑定页面模板"></a>b) 绑定页面模板</h4><p><img src="%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1576463332280.png" alt="1576463332280"></p>
<h3 id="1-4-公众号后台开发"><a href="#1-4-公众号后台开发" class="headerlink" title="1.4 公众号后台开发"></a>1.4 公众号后台开发</h3><p>除了使用上面所提到的直接在微信公众号后台配置的基本功能之外，微信公众号还允许我们接入后台程序。需要注意的是，一旦后台接入之后，之前的配置会自动失效。</p>
<h4 id="1-4-1-后台接入"><a href="#1-4-1-后台接入" class="headerlink" title="1.4.1 后台接入"></a>1.4.1 后台接入</h4><p><strong>a) 微信公众号后台配置</strong></p>
<p><img src="%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1576470117197.png" alt="1576470117197"></p>
<p><strong>b) node后台</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> parseString = <span class="built_in">require</span>(<span class="string">&#x27;xml2js&#x27;</span>).parseString;<span class="comment">//引入xml2js包</span></span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sha1 = <span class="built_in">require</span>(<span class="string">&#x27;sha1&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    appID: <span class="string">&#x27;wx16b01d87eca9d8f4&#x27;</span>, <span class="comment">//公众号里面取</span></span><br><span class="line">    AppSecret: <span class="string">&#x27;41458d7494fe25ed6d957a7632d72cfa&#x27;</span>, <span class="comment">//公众号里面取</span></span><br><span class="line">    token: <span class="string">&#x27;mytoken1234&#x27;</span> <span class="comment">//自定义的token</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(req.method)</span><br><span class="line">    <span class="keyword">if</span> (req.method == <span class="string">&#x27;GET&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> signature = req.query.signature,</span><br><span class="line">            timestamp = req.query.timestamp,</span><br><span class="line">            nonce = req.query.nonce,</span><br><span class="line">            echostr = req.query.echostr;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// token、timestamp、nonce三个参数进行字典序排序</span></span><br><span class="line">        <span class="keyword">var</span> arr = [config.token, timestamp, nonce].sort().join(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">        <span class="comment">// sha1加密    </span></span><br><span class="line">        <span class="keyword">var</span> result = sha1(arr);</span><br><span class="line">        <span class="built_in">console</span>.log(result, signature)</span><br><span class="line">        <span class="keyword">if</span> (result === signature) &#123;</span><br><span class="line">            res.send(echostr);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res.send(<span class="string">&#x27;mismatch&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        next()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;running....&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>c) 将node后台端口通过ngrok映射到外网</strong></p>
<p><img src="%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1576470280500.png" alt="1576470280500"></p>
<p><strong>d) 后台接入流程</strong></p>
<p><img src="%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1576470380003.png" alt="1576470380003"></p>
<h4 id="1-4-2-回复消息"><a href="#1-4-2-回复消息" class="headerlink" title="1.4.2 回复消息"></a>1.4.2 回复消息</h4><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Passive_user_reply_message.html">https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Passive_user_reply_message.html</a></p>
<blockquote>
<p>公众号的接口权限可在后台查询，微信公众号在定义客户端和服务端交互的时候，使用的数据格式是xml。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;xml&gt;</span><br><span class="line">  &lt;ToUserName&gt;&lt;![CDATA[toUser]]&gt;&lt;&#x2F;ToUserName&gt;</span><br><span class="line">  &lt;FromUserName&gt;&lt;![CDATA[fromUser]]&gt;&lt;&#x2F;FromUserName&gt;</span><br><span class="line">  &lt;CreateTime&gt;12345678&lt;&#x2F;CreateTime&gt;</span><br><span class="line">  &lt;MsgType&gt;&lt;![CDATA[text]]&gt;&lt;&#x2F;MsgType&gt;</span><br><span class="line">  &lt;Content&gt;&lt;![CDATA[你好]]&gt;&lt;&#x2F;Content&gt;</span><br><span class="line">&lt;&#x2F;xml&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理微信post消息请求 </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">app.post(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> buffer = [];</span><br><span class="line">        <span class="comment">//监听 data 事件 用于接收数据</span></span><br><span class="line">        req.on(<span class="string">&#x27;data&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">            buffer.push(data);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//监听 end 事件 用于处理接收完成的数据</span></span><br><span class="line">        req.on(<span class="string">&#x27;end&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">//输出接收完成的数据</span></span><br><span class="line">            parseString(Buffer.concat(buffer).toString(<span class="string">&#x27;utf-8&#x27;</span>), &#123; <span class="attr">explicitArray</span>: <span class="literal">false</span> &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, result</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                    <span class="comment">//打印错误信息</span></span><br><span class="line">                    <span class="built_in">console</span>.log(err);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//打印解析结果</span></span><br><span class="line">                    <span class="built_in">console</span>.log(result);</span><br><span class="line">                    result = result.xml;</span><br><span class="line">                    <span class="keyword">var</span> toUser = result.ToUserName; <span class="comment">//接收方微信</span></span><br><span class="line">                    <span class="keyword">var</span> fromUser = result.FromUserName;<span class="comment">//发送仿微信</span></span><br><span class="line">                    <span class="keyword">if</span> (result.Event === <span class="string">&#x27;subscribe&#x27;</span>) &#123;</span><br><span class="line">                        <span class="comment">//回复消息</span></span><br><span class="line">                        <span class="keyword">var</span> xml = returntext(fromUser, toUser, <span class="string">&#x27;欢迎关注公众号,hahhh&#x27;</span>);</span><br><span class="line">                        <span class="built_in">console</span>.log(xml)</span><br><span class="line">                        res.send(xml)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">var</span> xml = returntext(fromUser, toUser, <span class="string">&#x27;您好&#x27;</span>);</span><br><span class="line">                        <span class="built_in">console</span>.log(xml)</span><br><span class="line">                        res.send(xml)</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//回复文本消息</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">returntext</span>(<span class="params">toUser, fromUser, content</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xmlContent = <span class="string">&quot;&lt;xml&gt;&lt;ToUserName&gt;&lt;![CDATA[&quot;</span> + toUser + <span class="string">&quot;]]&gt;&lt;/ToUserName&gt;&quot;</span>;</span><br><span class="line">    xmlContent += <span class="string">&quot;&lt;FromUserName&gt;&lt;![CDATA[&quot;</span> + fromUser + <span class="string">&quot;]]&gt;&lt;/FromUserName&gt;&quot;</span>;</span><br><span class="line">    xmlContent += <span class="string">&quot;&lt;CreateTime&gt;&quot;</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().getTime() + <span class="string">&quot;&lt;/CreateTime&gt;&quot;</span>;</span><br><span class="line">    xmlContent += <span class="string">&quot;&lt;MsgType&gt;&lt;![CDATA[text]]&gt;&lt;/MsgType&gt;&quot;</span>;</span><br><span class="line">    xmlContent += <span class="string">&quot;&lt;Content&gt;&lt;![CDATA[&quot;</span> + content + <span class="string">&quot;]]&gt;&lt;/Content&gt;&lt;/xml&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> xmlContent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-4-3-重新开启自定义菜单"><a href="#1-4-3-重新开启自定义菜单" class="headerlink" title="1.4.3 重新开启自定义菜单"></a>1.4.3 重新开启自定义菜单</h4><p>当接入公众号后台之后，原来的自定义菜单、回复等功能会失效。如果想自定义菜单和公众号后台同时生效，我们可以在添加功能插件–&gt;自定义菜单中开启。</p>
<p><img src="%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1576469739930.png" alt="1576469739930"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/12/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/" data-id="ckdzwmbdk000y0wv0fumu78qu" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-js的作用域" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/20/js%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F/" class="article-date">
  <time datetime="2018-05-20T08:25:55.000Z" itemprop="datePublished">2018-05-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/20/js%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F/">js的作用域</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="一、作用域"><a href="#一、作用域" class="headerlink" title="一、作用域"></a>一、作用域</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">作用域（scope），程序设计概念，通常来说，一段程序代码中所用到的名字并不总是有效&#x2F;可用的，而限定这个名字的可用性的代码范围就是这个名字的作用域。</span><br></pre></td></tr></table></figure>

<p>作用域的使用提高了程序逻辑的局部性，增强程序的可靠性，减少名字冲突。</p>
<h3 id="1-全局作用域（全局变量）"><a href="#1-全局作用域（全局变量）" class="headerlink" title="1.全局作用域（全局变量）"></a>1.全局作用域（全局变量）</h3><p><strong>全局变量，原理就是将变量挂载到window对象中.</strong></p>
<p><strong>全局变量拥有全局的作用域，可在任意地方被调用</strong></p>
<p>全局变量有两种声明方式</p>
<h3 id="（1）函数外部"><a href="#（1）函数外部" class="headerlink" title="（1）函数外部"></a>（1）函数外部</h3><p>(写在函数外面的都是全局变量)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    var num &#x3D; 15; &#x2F;&#x2F;全局变量</span><br><span class="line">        function f() &#123;</span><br><span class="line">        var num &#x3D; 10; &#x2F;&#x2F;不是全局变量</span><br><span class="line">            function f2()&#123;</span><br><span class="line">               &#x2F;*----*&#x2F; </span><br><span class="line">            &#125;</span><br><span class="line">            f2();</span><br><span class="line">        &#125;</span><br><span class="line">    f();</span><br><span class="line">    console.log(num); &#x2F;&#x2F;  15</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（2）函数内部"><a href="#（2）函数内部" class="headerlink" title="（2）函数内部"></a>（2）函数内部</h3><p>(不加var的变量声明，隐式全局变量)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    function f() &#123;</span><br><span class="line">        num &#x3D; 10; &#x2F;&#x2F;隐式全局变量</span><br><span class="line">    &#125;</span><br><span class="line">    f();</span><br><span class="line">    console.log(num); &#x2F;&#x2F; 10</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="全局变量与隐式全局变量的区别"><a href="#全局变量与隐式全局变量的区别" class="headerlink" title="全局变量与隐式全局变量的区别"></a>全局变量与隐式全局变量的区别</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">隐式全局变量可以通过delete关键字来删除，全局变量不可以</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;全局变量不可被delete</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var a &#x3D; 2; &#x2F;&#x2F;全局变量</span><br><span class="line">    function f()&#123;</span><br><span class="line">        &#x2F;&#x2F;****</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(a); &#x2F;&#x2F;  2</span><br><span class="line">    delete a;</span><br><span class="line">    console.log(a); &#x2F;&#x2F;  2</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;隐式全局变量被delete</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    function f()&#123;</span><br><span class="line">        a &#x3D; 2; &#x2F;&#x2F;隐式全局变量</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(a); &#x2F;&#x2F;  2</span><br><span class="line">    delete a;</span><br><span class="line">    console.log(a); &#x2F;&#x2F;  not defined (已被删除)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-局部作用域-局部变量"><a href="#2-局部作用域-局部变量" class="headerlink" title="2.局部作用域(局部变量)"></a>2.局部作用域(局部变量)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">局部变量：写在函数体里面的变量</span><br><span class="line"></span><br><span class="line">局部变量只可以在当前函数内部使用</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    function f() &#123;</span><br><span class="line">        var num &#x3D; 10; &#x2F;&#x2F;局部变量</span><br><span class="line">        function f2()&#123;</span><br><span class="line">            console.log(num); &#x2F;&#x2F; 10</span><br><span class="line">        &#125;</span><br><span class="line">        f2();</span><br><span class="line">    &#125;</span><br><span class="line">    f();</span><br><span class="line">    console.log(num); &#x2F;&#x2F;  not defined</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="二、作用域链"><a href="#二、作用域链" class="headerlink" title="二、作用域链"></a>二、作用域链</h2><p>作用域链简而言之就是，调用变量时，若当前作用域内没有该变量时就向它的上一级作用域去寻找。</p>
<p>Javascript用的是词法作用域（静态作用域）</p>
<p>实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;    &#x2F;* 0级作用域 *&#x2F;</span><br><span class="line">var a &#x3D; 1;</span><br><span class="line">function aa()&#123;    &#x2F;* 1级作用域 *&#x2F;</span><br><span class="line">    &#x2F;&#x2F;var a &#x3D; 2;</span><br><span class="line">    function bb()&#123;  &#x2F;* 2级作用域 *&#x2F;</span><br><span class="line">        &#x2F;&#x2F;var a &#x3D; 3;</span><br><span class="line">        console.log(a);  &#x2F;&#x2F; 1</span><br><span class="line">    &#125;</span><br><span class="line">    bb();</span><br><span class="line">&#125;</span><br><span class="line">aa();</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>作用过程：</p>
<ol>
<li>当运行到console.log(a)时，会在当前作用域（2级作用域）内寻找是否有a可用；</li>
<li>若有直接使用，否则向上一级作用域（1级作用域）去寻找；</li>
<li>此时来到1级作用域，若此时有a可用则用，否则继续向上一级寻找，直到到达0级作用域；</li>
<li>此时来到0级作用域，若此时有a可用则用，否则报错；</li>
</ol>
<p><img src="js%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F/1.jpg" alt="作用域链"></p>
<p><strong>值得注意的是：作用域链的始发点与函数的调用位置无关，而与函数的声明位置有关</strong> </p>
<p>例子如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    var value &#x3D; 1;</span><br><span class="line">    function foo() &#123;</span><br><span class="line">        console.log(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function bar() &#123;</span><br><span class="line">        var value &#x3D; 2;</span><br><span class="line">        foo();</span><br><span class="line">    &#125;</span><br><span class="line">    bar();</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>此时的打印结果为1，而不是foo函数调用所在作用域的value = 2；</p>
<p>这里的1是foo函数声明所在的作用域中的value = 1；</p>
<p>## 三、预解析</p>
<p>当浏览器执行Javascript代码时，为了提高执行效率会在代码解释执行前进行预解析处理。</p>
<p>预解析处理规则：</p>
<p>\1. 变量提升 仅仅将变量声明提升到当前作用域的最上面，不包括变量的赋值</p>
<p>\2. 函数提升 将函数的声明提升到当前作用域的最上面，不包括函数的调用 </p>
<p><strong>函数的声明会提前到变量声明之前</strong></p>
<h3 id="变量提升"><a href="#变量提升" class="headerlink" title="变量提升"></a>变量提升</h3><p>实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    console.log(a); &#x2F;&#x2F;undefined</span><br><span class="line">    var a &#x3D; 10;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>上述代码结果打印为undefined,而不是10，这是为什么呢？</p>
<p>我们来看看与解析之后的结果，</p>
<p>预解析为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    var a</span><br><span class="line">    console.log(a);</span><br><span class="line">    a &#x3D; 10;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>由于变量声明被提升到作用域最前端，而赋值没有被提升，导致执行console.log(a);时 a还未被赋值。</p>
<h3 id="函数提升"><a href="#函数提升" class="headerlink" title="函数提升"></a>函数提升</h3><p>实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    f1();</span><br><span class="line">    function f1() &#123;</span><br><span class="line">        &#x2F;*-----*&#x2F;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>被解析为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    function f1() &#123;</span><br><span class="line">        &#x2F;*-----*&#x2F;</span><br><span class="line">    &#125;</span><br><span class="line">    f1();</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="函数的声明会提前到变量声明之前"><a href="#函数的声明会提前到变量声明之前" class="headerlink" title="函数的声明会提前到变量声明之前"></a>函数的声明会提前到变量声明之前</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">函数提升和变量提升同时发生时，函数的声明会提前到变量声明之前。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    var a &#x3D; 3;</span><br><span class="line">    function a()&#123;</span><br><span class="line">        console.log(10);</span><br><span class="line">    &#125;   </span><br><span class="line">    console.log(a);</span><br><span class="line">    a();</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>被解析为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    function a()&#123;</span><br><span class="line">        console.log(10);</span><br><span class="line">    &#125;</span><br><span class="line">    var a;</span><br><span class="line">    a &#x3D; 3</span><br><span class="line">    console.log(a);</span><br><span class="line">    a(); &#x2F;&#x2F;not function  因为此时a为变量而不是函数</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>值得注意的是：</strong></p>
<p>1.函数是可以被打印的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    function a()&#123;</span><br><span class="line">    &#x2F;*----*&#x2F;</span><br><span class="line">    &#125;</span><br><span class="line">console.log(a); &#x2F;&#x2F;打印函数a</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>2.变量a的赋值可以被普通类型和函数互相取代</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    var a；</span><br><span class="line">    a &#x3D; function()&#123;</span><br><span class="line">        &#x2F;*----*&#x2F;</span><br><span class="line">        &#125;</span><br><span class="line">    console.log(a); &#x2F;&#x2F;打印函数a</span><br><span class="line">    a &#x3D; 1;</span><br><span class="line">    console.log(a); &#x2F;&#x2F; 1；</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="匿名函数的申明不遵循预解析规则"><a href="#匿名函数的申明不遵循预解析规则" class="headerlink" title="匿名函数的申明不遵循预解析规则"></a>匿名函数的申明不遵循预解析规则</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    f();  &#x2F;&#x2F;报错</span><br><span class="line">    var f &#x3D; function()&#123;</span><br><span class="line">        &#x2F;*----*&#x2F;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>因为解析前后代码相同 执行 <strong>f()</strong> 时，f未被声明为函数类型。</p>
<h3 id="隐式全局变量的注意点"><a href="#隐式全局变量的注意点" class="headerlink" title="隐式全局变量的注意点"></a>隐式全局变量的注意点</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    f();</span><br><span class="line">    console.log(a);  &#x2F;&#x2F;undefined</span><br><span class="line">    console.log(b);  &#x2F;&#x2F;9</span><br><span class="line">    function f() &#123;</span><br><span class="line">      var a &#x3D; b &#x3D; c &#x3D; 9;</span><br><span class="line">      console.log(a); &#x2F;&#x2F;9</span><br><span class="line">      console.log(b); &#x2F;&#x2F;9</span><br><span class="line">    &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>被解析为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    function f() &#123;</span><br><span class="line">      var a;  &#x2F;&#x2F;局部变量</span><br><span class="line">      a &#x3D; 9;  </span><br><span class="line">      b &#x3D; 9;  &#x2F;&#x2F;隐式全局变量</span><br><span class="line">      console.log(a);  &#x2F;&#x2F;9</span><br><span class="line">      console.log(b);  &#x2F;&#x2F;9</span><br><span class="line">    &#125;</span><br><span class="line">    f();</span><br><span class="line">    console.log(b);  &#x2F;&#x2F;9</span><br><span class="line">    console.log(a);  &#x2F;&#x2F;undefined   因为a是局部变量</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/20/js%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F/" data-id="ckdzwmbdf000f0wv08u3hds45" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-angular核心语法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/14/angular%E6%A0%B8%E5%BF%83%E8%AF%AD%E6%B3%95/" class="article-date">
  <time datetime="2018-05-14T07:33:32.000Z" itemprop="datePublished">2018-05-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/angular/">angular</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/14/angular%E6%A0%B8%E5%BF%83%E8%AF%AD%E6%B3%95/">angular核心语法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-Angular-cli"><a href="#1-Angular-cli" class="headerlink" title="1.Angular-cli"></a>1.Angular-cli</h2><h3 id="1-1-创建Angular-cli项目"><a href="#1-1-创建Angular-cli项目" class="headerlink" title="1.1 创建Angular-cli项目"></a>1.1 创建Angular-cli项目</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>环境要求</span><br><span class="line">   Node <span class="number">10.9</span><span class="number">.0</span> or higher</span><br><span class="line">   NPM <span class="number">3</span> or higher</span><br><span class="line">   Python2<span class="number">.7</span><span class="number">.1</span>                  </span><br><span class="line">   C++ 编译工具</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//Python下载地址</span></span><br><span class="line">   https:<span class="comment">//www.python.org/downloads/release/python-271/</span></span><br><span class="line">   python --version</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//C++编译工具   windows7/Vista依赖于.NET Framework 4.5.1</span></span><br><span class="line">   <span class="comment">//npm install --global --production windows-build-tools</span></span><br><span class="line">   <span class="comment">//如果安装出错，可以去用户目录下的.windows-build-tools下选择安装文件双击运行</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>安装Angular-cli</span><br><span class="line">   npm install -g @angular/cli</span><br><span class="line">   ng help</span><br><span class="line">   ng <span class="keyword">new</span> &lt;项目名称&gt;</span><br><span class="line">   ng serve    <span class="comment">//默认占用 4200 端口号，可以通过下面选项配置</span></span><br><span class="line">   ng serve --port <span class="number">4201</span></span><br></pre></td></tr></table></figure>

<p><img src="angular%E6%A0%B8%E5%BF%83%E8%AF%AD%E6%B3%95/1563331466612.png" alt="1563331466612"></p>
<h3 id="1-2-Angular-cli项目目录结构"><a href="#1-2-Angular-cli项目目录结构" class="headerlink" title="1.2 Angular-cli项目目录结构"></a>1.2 Angular-cli项目目录结构</h3><p><img src="angular%E6%A0%B8%E5%BF%83%E8%AF%AD%E6%B3%95/1563333171751.png" alt="ng启动过程.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── e2e 端到端测试（暂且不关心）</span><br><span class="line">├── node_modules npm安装的第三方包</span><br><span class="line">├── src 存放业务源码</span><br><span class="line">├── .angular.json            AngularCLI脚手架工具配置文件</span><br><span class="line">├── .editorconfig            针对编辑器的代码风格约束</span><br><span class="line">├── .gitignore                 Git仓库忽略配置项</span><br><span class="line">├── karma.conf.js            测试配置文件（给karma用的，暂且不用关心）</span><br><span class="line">├── package.json            项目包说明文件</span><br><span class="line">├── README.md             项目说明文件</span><br><span class="line">├── tsconfig.json             TypeScript配置文件</span><br><span class="line">└── tslint.json                  TypeScript代码风格校验工具配置文件（类似于 eslint）</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//npm scripts介绍</span></span><br><span class="line">...</span><br><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;ng&quot;</span>: <span class="string">&quot;ng&quot;</span>, 运行查看 Angular CLI 脚手架工具使用帮助</span><br><span class="line">    <span class="string">&quot;start&quot;</span>: <span class="string">&quot;ng serve&quot;</span>, 运行开发模式</span><br><span class="line">    <span class="string">&quot;build&quot;</span>: <span class="string">&quot;ng build --prod&quot;</span>, 运行项目打包构建（用于发布到生成环境）</span><br><span class="line">    <span class="string">&quot;test&quot;</span>: <span class="string">&quot;ng test&quot;</span>, 运行karma单元测试</span><br><span class="line">    <span class="string">&quot;lint&quot;</span>: <span class="string">&quot;ng lint&quot;</span>, 运行TypeScript代码校验</span><br><span class="line">    <span class="string">&quot;e2e&quot;</span>: <span class="string">&quot;ng e2e&quot;</span> 运行protractor端到端测试</span><br><span class="line">  &#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">main.js</span><br><span class="line">- 描述：模块化启动入口</span><br><span class="line">- 职责：加载启动根模块</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">AppModule</span><br><span class="line">- 描述：项目根模块</span><br><span class="line">- 职责：把组件、服务、路由、指令等组织到一起，设置AppComponent为根组件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; BrowserModule &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-browser&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; NgModule &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; AppRoutingModule &#125; <span class="keyword">from</span> <span class="string">&#x27;./app-routing.module&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.component&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; FooComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;./foo/foo.component&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; LoginComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;./home/login/login.component&#x27;</span>;</span><br><span class="line"></span><br><span class="line">@NgModule(&#123;</span><br><span class="line">  <span class="comment">//声明模块资源：组件、指令、服务</span></span><br><span class="line">  declarations: [</span><br><span class="line">    AppComponent,</span><br><span class="line">    FooComponent,</span><br><span class="line">    LoginComponent</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">//依赖模块</span></span><br><span class="line">  imports: [</span><br><span class="line">    BrowserModule,</span><br><span class="line">    AppRoutingModule</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">//指定应用程序的根级别需要使用的service</span></span><br><span class="line">  providers: [],</span><br><span class="line">  <span class="comment">//指定启动组件</span></span><br><span class="line">  bootstrap: [AppComponent]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppModule</span> </span>&#123; &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">AppComponent</span><br><span class="line">- 描述：项目根组件</span><br><span class="line">- 职责：替换掉 index.html 文件中的 &lt;app-root&gt;&lt;/app-root&gt; 节点</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.component.spec.ts      单元测试文件，暂时不用管他</span><br></pre></td></tr></table></figure>

<h2 id="2-Angular核心语法"><a href="#2-Angular核心语法" class="headerlink" title="2.Angular核心语法"></a>2.Angular核心语法</h2><h3 id="2-1-组件"><a href="#2-1-组件" class="headerlink" title="2.1 组件"></a>2.1 组件</h3><h4 id="2-1-1-组件基本使用"><a href="#2-1-1-组件基本使用" class="headerlink" title="2.1.1 组件基本使用"></a>2.1.1 组件基本使用</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#1.app.component.ts</span><br><span class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在Angular中，组件就是一个类</span></span><br><span class="line"><span class="comment">//@Component 组件的装饰器 (组件的元数据)</span></span><br><span class="line"><span class="comment">// selector: 用来定义组件渲染的标签名称(index.html中有一个app-root)  其实就是组件的名称</span></span><br><span class="line"><span class="comment">// templateUrl: 用来指定组件的页面模板</span></span><br><span class="line"><span class="comment">// styleUrls : 一个数组，用来存放组件相关的样式文件</span></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;app-root&#x27;</span>,</span><br><span class="line">  templateUrl: <span class="string">&#x27;./app.component.html&#x27;</span>,</span><br><span class="line">  styleUrls: [<span class="string">&#x27;./app.component.less&#x27;</span>]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123;</span><br><span class="line">  <span class="comment">//这里面用来放组件的数据和方法</span></span><br><span class="line">  title = <span class="string">&#x27;testng2&#x27;</span>;</span><br><span class="line">  count = <span class="number">0</span>;</span><br><span class="line">  increment = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.count ++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2.app.component.html</span><br><span class="line">&lt;h3&gt;&#123;&#123;count&#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;button (click)=<span class="string">&quot;increment()&quot;</span>&gt;点我+<span class="number">1</span>&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-1-2-组件的创建"><a href="#2-1-2-组件的创建" class="headerlink" title="2.1.2 组件的创建"></a>2.1.2 组件的创建</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 创建组件  组件会被创建到app目录下</span></span><br><span class="line">ng generate component foo</span><br><span class="line">ng generate component /home/login</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> app.component.html中使用上面创建的组件</span></span><br><span class="line">&lt;app-foo&gt;&lt;/app-foo&gt;</span><br><span class="line">&lt;app-login&gt;&lt;/app-login&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-指令与模板语法"><a href="#2-2-指令与模板语法" class="headerlink" title="2.2 指令与模板语法"></a>2.2 指令与模板语法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">NgClass  作用：添加或移除一组 CSS 类</span><br><span class="line"></span><br><span class="line">NgStyle  作用：添加或移除一组 CSS 样式</span><br><span class="line"></span><br><span class="line">NgModel 作用：双向绑定到 HTML 表单元素</span><br><span class="line"></span><br><span class="line">NgIf  作用：根据条件添加或移除 DOM</span><br><span class="line"></span><br><span class="line">NgSwitch  作用：类似于 JavaScript 中的 <span class="keyword">switch</span> 语句，根据条件渲染多个选项中的一个。</span><br><span class="line"></span><br><span class="line">NgFor 作用：列表渲染</span><br></pre></td></tr></table></figure>

<h4 id="2-2-1-插值表达式"><a href="#2-2-1-插值表达式" class="headerlink" title="2.2.1 插值表达式"></a>2.2.1 插值表达式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&#123;&#123;js表达式&#125;&#125;</span></span><br><span class="line"><span class="comment">//[xx] = &quot;js表达式&quot;     angular中的[]类似于vue中的v-bind</span></span><br><span class="line">&lt;p&gt;Message: &#123;&#123; msg &#125;&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p [innerHTML]=<span class="string">&quot;msg&quot;</span>&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 写法一 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123; heroImageUrl &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 写法二，推荐 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> [<span class="attr">src</span>]=<span class="string">&quot;heroImageUrl&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 写法三 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">bind-src</span>=<span class="string">&quot;heroImageUrl&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在布尔特性的情况下，它们的存在即暗示为 <code>true</code>，属性绑定工作起来略有不同，在这个例子中：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> [<span class="attr">disabled</span>]=<span class="string">&quot;isButtonDisabled&quot;</span>&gt;</span>Button<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">如果 isButtonDisabled 的值是 null、undefined 或 false，则 disabled 特性甚至不会被包含在渲染出来的 <span class="tag">&lt;<span class="name">button</span>&gt;</span> 元素中。</span><br></pre></td></tr></table></figure>

<h4 id="2-2-2-使用-JavaScript-表达式"><a href="#2-2-2-使用-JavaScript-表达式" class="headerlink" title="2.2.2 使用 JavaScript 表达式"></a>2.2.2 使用 JavaScript 表达式</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>1 + 1 = &#123;&#123; 1 + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; num + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; isDone ? &#x27;完了&#x27; : &#x27;没完&#x27; &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; title.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> [<span class="attr">title</span>]=<span class="string">&quot;title.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;)&quot;</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>编写模板表达式所用的语言看起来很像 JavaScript。 很多 JavaScript 表达式也是合法的模板表达式，但不是全部。</p>
<p>Angular 遵循轻逻辑的设计思路，所以在模板引擎中不能编写非常复杂的 JavaScript 表达式，这里有一些约定：</p>
<ul>
<li>赋值 (<code>=</code>, <code>+=</code>, <code>-=</code>, …)</li>
<li><code>new</code> 运算符</li>
<li>使用 <code>;</code> 或 <code>,</code> 的链式表达式</li>
<li>自增或自减操作符 (<code>++</code>和<code>--</code>)</li>
</ul>
<h4 id="2-2-3-列表渲染"><a href="#2-2-3-列表渲染" class="headerlink" title="2.2.3 列表渲染"></a>2.2.3 列表渲染</h4><p>基本用法：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AppComponent &#123;</span><br><span class="line">  heroes = [<span class="string">&#x27;Windstorm&#x27;</span>, <span class="string">&#x27;Bombasto&#x27;</span>, <span class="string">&#x27;Magneta&#x27;</span>, <span class="string">&#x27;Tornado&#x27;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Heroes:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> [<span class="attr">id</span>]=<span class="string">&quot;&#x27;list-&#x27; + hero&quot;</span> *<span class="attr">ngFor</span>=<span class="string">&quot;let hero of heroes&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123; hero &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>也可以获取 index 索引：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> *<span class="attr">ngFor</span>=<span class="string">&quot;let hero of heroes; let i=index&quot;</span>&gt;</span>&#123;&#123;i + 1&#125;&#125; - &#123;&#123;hero.name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-4-条件渲染"><a href="#2-2-4-条件渲染" class="headerlink" title="2.2.4 条件渲染"></a>2.2.4 条件渲染</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> *<span class="attr">ngIf</span>=<span class="string">&quot;heroes.length&gt;3; else templateName&quot;</span>&gt;</span>有很多英雄<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ng-template</span> #<span class="attr">templateName</span>&gt;</span>没有很多英雄<span class="tag">&lt;/<span class="name">ng-template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-5-NgSwitch"><a href="#2-2-5-NgSwitch" class="headerlink" title="2.2.5 NgSwitch"></a>2.2.5 NgSwitch</h4><p>NgSwitch 的语法比较啰嗦，使用频率小一些。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> [<span class="attr">ngSwitch</span>]=<span class="string">&quot;currentHero&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> *<span class="attr">ngSwitchCase</span>=<span class="string">&quot;&#x27;Windstorm&#x27;&quot;</span>&gt;</span>Windstorm<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> *<span class="attr">ngSwitchCase</span>=<span class="string">&quot;&#x27;Bombasto&#x27;&quot;</span>&gt;</span>Bombasto<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> *<span class="attr">ngSwitchCase</span>=<span class="string">&quot;&#x27;Magneta&#x27;&quot;</span>&gt;</span>Magneta<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> *<span class="attr">ngSwitchDefault</span>&gt;</span>Tornado<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-6-自定义指令"><a href="#2-2-6-自定义指令" class="headerlink" title="2.2.6 自定义指令"></a>2.2.6 自定义指令</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">自定义指令：https:<span class="comment">//www.angular.cn/guide/attribute-directives</span></span><br><span class="line"></span><br><span class="line">ng generate directive highlight</span><br><span class="line"></span><br><span class="line">#highlight.directive.ts</span><br><span class="line"><span class="keyword">import</span> &#123; Directive,ElementRef  &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line">@Directive(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;[appHighlight]&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">HighlightDirective</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(el: ElementRef) &#123;</span><br><span class="line">    el.nativeElement.style.backgroundColor = <span class="string">&#x27;yellow&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#app.component.html</span><br><span class="line">&lt;p appHighlight&gt;Highlight me!&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-7-事件处理"><a href="#2-2-7-事件处理" class="headerlink" title="2.2.7 事件处理"></a>2.2.7 事件处理</h4><p>事件绑定只需要用圆括号把事件名包起来即可：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> (<span class="attr">click</span>)=<span class="string">&quot;onSave()&quot;</span>&gt;</span>Save<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>可以把事件对象传递到事件处理函数中：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> (<span class="attr">click</span>)=<span class="string">&quot;onSave($event)&quot;</span>&gt;</span>On Save<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>也可以传递额外的参数（取决于你的业务）：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> (<span class="attr">click</span>)=<span class="string">&quot;onSave($event, 123)&quot;</span>&gt;</span>On Save<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>当事件处理语句比较简单的时候，我们可以内联事件处理语句：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> (<span class="attr">click</span>)=<span class="string">&quot;message = &#x27;哈哈哈&#x27;&quot;</span>&gt;</span>内联事件处理<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>我们可以利用 <strong>属性绑定 + 事件处理</strong> 的方式实现表单文本框双向绑定：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> [<span class="attr">value</span>]=<span class="string">&quot;message&quot;</span></span></span><br><span class="line"><span class="tag">       (<span class="attr">input</span>)=<span class="string">&quot;message=$event.target.value&quot;</span> &gt;</span></span><br></pre></td></tr></table></figure>

<p>事件绑定的另一种写法，使用 <code>on-</code> 前缀的方式：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 绑定事件处理函数 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">on-click</span>=<span class="string">&quot;onSave()&quot;</span>&gt;</span>On Save<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-8-双向绑定"><a href="#2-2-8-双向绑定" class="headerlink" title="2.2.8 双向绑定"></a>2.2.8 双向绑定</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> [(<span class="attr">ngModel</span>)]=<span class="string">&quot;message&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行之后你会发现报错了，原因是使用 <code>ngModel</code> 必须导入 <code>FormsModule</code> 并把它添加到 Angular 模块的 <code>imports</code> 列表中。</p>
<p>导入 <code>FormsModule</code> 并让 <code>[(ngModel)]</code> 可用的代码如下：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; BrowserModule &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-browser&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; NgModule &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line">+++ <span class="keyword">import</span> &#123; FormsModule &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/forms&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; AppComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.component&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NgModule</span>(&#123;</span><br><span class="line">  declarations: [</span><br><span class="line">    AppComponent</span><br><span class="line">  ],</span><br><span class="line">  imports: [</span><br><span class="line">    BrowserModule,</span><br><span class="line">+++ FormsModule</span><br><span class="line">  ],</span><br><span class="line">  providers: [],</span><br><span class="line">  bootstrap: [AppComponent]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AppModule &#123; &#125;</span><br></pre></td></tr></table></figure>

<p>通过以上的配置之后，你就可以开心的在 Angular 中使用双向数据绑定了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//多行文本</span></span><br><span class="line">&lt;textarea cols=<span class="string">&quot;30&quot;</span> rows=<span class="string">&quot;10&quot;</span> [(ngModel)]=<span class="string">&quot;message&quot;</span>&gt;&lt;/textarea&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//复选框</span></span><br><span class="line">&lt;h3&gt;复选框&lt;/h3&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;checkbox&quot;</span> [(ngModel)]=<span class="string">&quot;seen&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//单选按钮</span></span><br><span class="line">&lt;input type=<span class="string">&quot;radio&quot;</span> [value]=<span class="string">&quot;0&quot;</span> [(ngModel)]=<span class="string">&quot;gender&quot;</span>&gt; 男</span><br><span class="line">&lt;input type=<span class="string">&quot;radio&quot;</span> [value]=<span class="string">&quot;1&quot;</span> [(ngModel)]=<span class="string">&quot;gender&quot;</span>&gt; 女</span><br><span class="line">&lt;p&gt;选中了：&#123;&#123; gender &#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//下拉列表</span></span><br><span class="line">&lt;select [(ngModel)]=<span class="string">&quot;hobby&quot;</span>&gt;</span><br><span class="line">  &lt;option [value]=<span class="string">&quot;0&quot;</span>&gt;吃饭&lt;/option&gt;</span><br><span class="line">  &lt;option [value]=<span class="string">&quot;1&quot;</span>&gt;睡觉&lt;/option&gt;</span><br><span class="line">  &lt;option [value]=<span class="string">&quot;2&quot;</span>&gt;打豆豆&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">&lt;p&gt;选中的爱好：&#123;&#123; hobby &#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-9-Class绑定"><a href="#2-2-9-Class绑定" class="headerlink" title="2.2.9 Class绑定"></a>2.2.9 Class绑定</h4><ul>
<li><a target="_blank" rel="noopener" href="https://angular.io/guide/template-syntax#ngClass">https://angular.io/guide/template-syntax#ngClass</a></li>
</ul>
<p>a) 普通写法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;我们也可以通过类绑定或样式绑定来显示或隐藏一个元素。</span><br><span class="line">&#x2F;&#x2F;  isSpecial &#x3D; true</span><br><span class="line">&lt;div [class.hidden]&#x3D;&quot;!isSpecial&quot;&gt;Show with class&lt;&#x2F;div&gt;</span><br><span class="line">&lt;div [class.hidden]&#x3D;&quot;isSpecial&quot;&gt;Hide with class&lt;&#x2F;div&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 标准class绑定写法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bad curly special&quot;</span>&gt;</span>Bad curly special<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--使用bind来添加指定的class  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bad curly special&quot;</span></span></span><br><span class="line"><span class="tag">     [<span class="attr">class</span>]=<span class="string">&quot;&#x27;bad&#x27;&quot;</span>&gt;</span>Bad curly<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--通过isSpecial属性来切换special样式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> [<span class="attr">class.special</span>]=<span class="string">&quot;isSpecial&quot;</span>&gt;</span>The class binding is special<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>b) 使用NgClass指令 </p>
<p><code>NgClass</code> 指令接收一个对象，对象的 <code>key</code> 指定 css 类名，value 给定一个布尔值，当布尔值为真则作用该类名，当布尔值为假则移除给类名。</p>
<p>语法规则：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> [<span class="attr">ngClass</span>]=<span class="string">&quot;&#123;</span></span></span><br><span class="line"><span class="tag"><span class="string">  css类名: 布尔值,</span></span></span><br><span class="line"><span class="tag"><span class="string">  css类名: 布尔值</span></span></span><br><span class="line"><span class="tag"><span class="string">&#125;&quot;</span>&gt;</span>测试文本<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>基本示例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.saveable</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-class">.modified</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.special</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#ff3300</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">currentClasses = &#123;</span><br><span class="line">    <span class="string">&#x27;special&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&#x27;modified&#x27;</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="string">&#x27;saveable&#x27;</span>:<span class="literal">true</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> [<span class="attr">ngClass</span>]=<span class="string">&quot;&#123;&#x27;special&#x27;:true,&#x27;saveable&#x27;:true&#125;&quot;</span>&gt;</span>This div is initially saveable, unchanged, and special<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> [<span class="attr">ngClass</span>]=<span class="string">&quot;currentClasses&quot;</span>&gt;</span>This div is initially saveable, unchanged, and special<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-10-Style绑定"><a href="#2-2-10-Style绑定" class="headerlink" title="2.2.10 Style绑定"></a>2.2.10 Style绑定</h4><p>a) 普通写法</p>
<p>通过<strong>样式绑定</strong>，可以设置内联样式。</p>
<p>样式绑定的语法与属性绑定类似。 但方括号中的部分不是元素的属性名，而由<strong>style</strong>前缀，一个点 (<code>.</code>)和 CSS 样式的属性名组成。 形如：<code>[style.style-property]</code>。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> [<span class="attr">style.color</span>]=<span class="string">&quot;isSpecial ? &#x27;red&#x27;: &#x27;green&#x27;&quot;</span>&gt;</span>Red<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 也可以 backgroundColor --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> [<span class="attr">style.background-color</span>]=<span class="string">&quot;canSave ? &#x27;cyan&#x27;: &#x27;grey&#x27;&quot;</span> &gt;</span>Save<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> [<span class="attr">style.display</span>]=<span class="string">&quot;isSpecial ? &#x27;block&#x27; : &#x27;none&#x27;&quot;</span>&gt;</span>Show with style<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> [<span class="attr">style.display</span>]=<span class="string">&quot;isSpecial ? &#x27;none&#x27;  : &#x27;block&#x27;&quot;</span>&gt;</span>Hide with style<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>有些样式绑定中的样式带有单位。在这里，以根据条件用 “em” 和 “%” 来设置字体大小的单位。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> [<span class="attr">style.font-size.em</span>]=<span class="string">&quot;isSpecial ? 3 : 1&quot;</span> &gt;</span>Big<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> [<span class="attr">style.font-size.</span>%]=<span class="string">&quot;!isSpecial ? 150 : 50&quot;</span> &gt;</span>Small<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>提示：<em>样式属性</em>命名方法可以用<a target="_blank" rel="noopener" href="https://angular.cn/guide/glossary#dash-case">中线命名法</a>，像上面的一样 也可以用<a target="_blank" rel="noopener" href="https://angular.cn/guide/glossary#camelcase">驼峰式命名法</a>，如<code>fontSize</code>。</p>
</blockquote>
<p>b) 使用NgStyle指令</p>
<p>虽然这是设置单一样式的好办法，但我们通常更喜欢使用 <a target="_blank" rel="noopener" href="https://angular.cn/guide/template-syntax#ngStyle">NgStyle指令</a> 来同时设置多个内联样式。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> currentStyles = &#123;</span><br><span class="line">    <span class="string">&#x27;font-style&#x27;</span>: <span class="string">&#x27;italic&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;font-weight&#x27;</span>: <span class="string">&#x27;bold&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;font-size&#x27;</span>: <span class="string">&#x27;24px&#x27;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> [<span class="attr">ngStyle</span>]=<span class="string">&quot;currentStyles&quot;</span>&gt;</span></span><br><span class="line">  This div is initially italic, normal weight, and extra large (24px).</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ngStyle 这种方式相当于在代码里面写 CSS 样式，比较丑陋，而且将来不太好修改，非常不建议这样写（足够简单的情况除外）。</p>
<h4 id="2-2-11-模板引用变量"><a href="#2-2-11-模板引用变量" class="headerlink" title="2.2.11 模板引用变量"></a>2.2.11 模板引用变量</h4><p><strong>模板引用变量</strong>通常用来引用模板中的某个DOM元素，它还可以引用Angular组件或指令或<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/Web_Components">Web Component</a>。</p>
<p>使用井号 (#) 来声明引用变量。 <code>#phone</code>的意思就是声明一个名叫<code>phone</code>的变量来引用<code>&lt;input&gt;</code>元素。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> #<span class="attr">phone</span> <span class="attr">placeholder</span>=<span class="string">&quot;phone number&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>我们可以在模板中的任何地方引用模板引用变量。 比如声明在<code>&lt;input&gt;</code>上的<code>phone</code>变量就是在模板另一侧的<code>&lt;button&gt;</code>上使用的。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> #<span class="attr">phone</span> <span class="attr">placeholder</span>=<span class="string">&quot;phone number&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- lots of other elements --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- phone refers to the input element; pass its `value` to an event handler --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> (<span class="attr">click</span>)=<span class="string">&quot;callPhone(phone.value)&quot;</span>&gt;</span>Call<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>大多数情况下，Angular会把模板引用变量的值设置为声明它的那个元素。在上面例子中，<code>phone</code> 引用的是表示<em>电话号码</em>的<code>&lt;input&gt;</code>框。 “拨号”按钮的点击事件处理器把这个<em>input</em>值传给了组件的<code>callPhone</code>方法。 不过，指令也可以修改这种行为，让这个值引用到别处，比如它自身。 <code>NgForm</code>指令就是这么做的。</p>
</blockquote>
<p>模板引用变量使用注意：</p>
<ul>
<li>模板引用变量的作用范围是<em>整个模板</em>。 不要在同一个模板中多次定义同一个变量名，否则它在运行期间的值是无法确定的。</li>
<li>如果我在模板里面定义的局部变量和组件内部的属性重名会怎么样呢<ul>
<li>如果真的出现了重名，Angular 会按照以下优先级来进行处理</li>
<li><code>模板局部变量 &gt; 指令中的同名变量 &gt; 组件中的同名属性</code></li>
</ul>
</li>
<li>我们也可以用<code>ref-</code>前缀代替<code>#</code>。 下面的例子中就用把<code>fax</code>变量声明成了<code>ref-fax</code>而不是<code>#fax</code>。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref-fax</span> <span class="attr">placeholder</span>=<span class="string">&quot;fax number&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> (<span class="attr">click</span>)=<span class="string">&quot;callFax(fax.value)&quot;</span>&gt;</span>Fax<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-12-过滤器"><a href="#2-2-12-过滤器" class="headerlink" title="2.2.12 过滤器"></a>2.2.12 过滤器</h4><p>在 Angular 中，过滤器也叫管道。它最重要的作用就是用来格式化数据的输出。</p>
<p>举个简单例子：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">currentTime=<span class="keyword">new</span> <span class="built_in">Date</span>();</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;currentTime | date:&#x27;yyyy-MM-dd HH:mm:ss&#x27;&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Angular 一共内置了一些过滤器：<a target="_blank" rel="noopener" href="https://angular.io/api?type=pipe%E3%80%82">https://angular.io/api?type=pipe。</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//货币转换 currency</span></span><br><span class="line">&#123;&#123;<span class="number">123</span> | currency &#125;&#125;  <span class="comment">//$123</span></span><br><span class="line">&#123;&#123;<span class="number">123</span> | currency:<span class="string">&#x27;￥&#x27;</span> &#125;&#125;  <span class="comment">//￥123</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//格式化时间 date</span></span><br><span class="line">&#123;&#123;<span class="keyword">new</span> <span class="built_in">Date</span>() | date:<span class="string">&#x27;yyyyMMdd&#x27;</span>&#125;&#125;  <span class="comment">//2016/11/02</span></span><br><span class="line">yyyy/yy : <span class="number">2016</span> / <span class="number">16</span>（年）</span><br><span class="line">MM： <span class="number">11</span>  （月）</span><br><span class="line">dd：<span class="number">02</span> （日）</span><br><span class="line">h/hh : <span class="number">8</span> / <span class="number">08</span> （时）</span><br><span class="line">m/mm : <span class="number">5</span> / <span class="number">05</span> （分）</span><br><span class="line">s /ss : <span class="number">9</span> /<span class="number">09</span>（秒）</span><br><span class="line">EEEE/EEE :（星期）</span><br><span class="line"></span><br><span class="line"><span class="comment">//json</span></span><br><span class="line">将JavaScript对象转为json对象</span><br><span class="line">&#123;&#123;&#123;<span class="attr">name</span>:<span class="string">&#x27;jack&#x27;</span>&#125; | json&#125;&#125; <span class="comment">// &#123;&quot;name&quot;:&quot;jack&quot;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//将字符串数字转为数字 number</span></span><br><span class="line">&#123;&#123;<span class="string">&#x27;123.134545&#x27;</span>| number:<span class="number">4</span>&#125;&#125; <span class="comment">//保留4位小数 四舍五入   默认保留3位小数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//uppercase lowercase</span></span><br><span class="line">将英文字母转为大写或小写。</span><br><span class="line">&#123;&#123; <span class="string">&#x27;Hello&#x27;</span> | uppercase  &#125;&#125;  <span class="comment">//HELLO</span></span><br><span class="line">&#123;&#123;<span class="string">&#x27;Hello&#x27;</span> | lowercase&#125;&#125;  <span class="comment">//hello</span></span><br></pre></td></tr></table></figure>

<p>在复杂业务场景中，内置的过滤器肯定是不够用的，所有 Angular 也支持自定义过滤器。</p>
<p><a target="_blank" rel="noopener" href="https://angular.io/guide/pipes">https://angular.io/guide/pipes</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义过滤器</span></span><br><span class="line">ng generate pipe msgformat</span><br><span class="line"></span><br><span class="line"><span class="comment">//msgformat.pipe.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; Pipe, PipeTransform &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line">@Pipe(&#123;</span><br><span class="line">  name: <span class="string">&#x27;msgformat&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">MsgformatPipe</span> <span class="title">implements</span> <span class="title">PipeTransform</span> </span>&#123;</span><br><span class="line">  transform(value: string, ...args: unknown[]): unknown &#123;</span><br><span class="line">    <span class="keyword">return</span> value.split(<span class="string">&#x27;&#x27;</span>).reverse().join(<span class="string">&#x27;&#x27;</span>);;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用</span></span><br><span class="line">&lt;div&gt;&#123;&#123;<span class="string">&quot;123&quot;</span>|msgformat&#125;&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-路由"><a href="#2-3-路由" class="headerlink" title="2.3 路由"></a>2.3 路由</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">#1.app.module.ts</span><br><span class="line"><span class="keyword">import</span> &#123; BrowserModule &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-browser&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; NgModule &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; AppRoutingModule &#125; <span class="keyword">from</span> <span class="string">&#x27;./app-routing.module&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.component&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; FooComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;./foo/foo.component&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; LoginComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;./home/login/login.component&#x27;</span>;</span><br><span class="line"><span class="comment">//引入路由模块</span></span><br><span class="line"><span class="keyword">import</span> &#123; RouterModule, Routes &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//声明路由</span></span><br><span class="line"><span class="keyword">const</span> appRoutes: Routes = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;foo&#x27;</span>, <span class="attr">component</span>: FooComponent &#125;,</span><br><span class="line">  <span class="comment">//路由路径、组件和路由数据</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;login/:id&#x27;</span>, <span class="attr">component</span>: LoginComponent ,<span class="attr">data</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;login信息&#x27;</span> &#125;&#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">@NgModule(&#123;</span><br><span class="line">  <span class="comment">//声明模块资源：组件、指令、服务</span></span><br><span class="line">  declarations: [</span><br><span class="line">    AppComponent,</span><br><span class="line">    FooComponent,</span><br><span class="line">    LoginComponent</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">//依赖模块</span></span><br><span class="line">  imports: [</span><br><span class="line">    RouterModule.forRoot(</span><br><span class="line">      appRoutes</span><br><span class="line">    ),</span><br><span class="line">    BrowserModule,</span><br><span class="line">    AppRoutingModule</span><br><span class="line">  ],</span><br><span class="line">  providers: [],</span><br><span class="line">  <span class="comment">//指定启动组件</span></span><br><span class="line">  bootstrap: [AppComponent]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppModule</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">#2.app.component.html</span><br><span class="line">&lt;!--routerLinkActive：指定路由被激活的样式</span><br><span class="line">      queryParams：路由传参</span><br><span class="line">    --&gt;</span><br><span class="line">&lt;a routerLink=<span class="string">&quot;/foo&quot;</span> routerLinkActive=<span class="string">&quot;active&quot;</span>&gt;来到foo&lt;/a&gt;</span><br><span class="line">&lt;a routerLink=<span class="string">&quot;/login/5&quot;</span> [queryParams]=<span class="string">&quot;&#123;name: &#x27;zhangsan&#x27;&#125;&quot;</span> routerLinkActive=<span class="string">&quot;active&quot;</span>&gt;来到login&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--这边的router-outlet就类似于vue中的router-view--&gt;</span><br><span class="line">&lt;router-outlet&gt;&lt;/router-outlet&gt;</span><br><span class="line"></span><br><span class="line">#3.login.component.ts</span><br><span class="line"><span class="keyword">import</span> &#123; Component, OnInit &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; ActivatedRoute &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Location &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/common&#x27;</span>;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;app-login&#x27;</span>,</span><br><span class="line">  templateUrl: <span class="string">&#x27;./login.component.html&#x27;</span>,</span><br><span class="line">  styleUrls: [<span class="string">&#x27;./login.component.less&#x27;</span>]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginComponent</span> <span class="title">implements</span> <span class="title">OnInit</span> </span>&#123;</span><br><span class="line">  <span class="comment">//声明id</span></span><br><span class="line">  public id:string;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//将route和location注入到构造函数</span></span><br><span class="line">  <span class="keyword">constructor</span>(</span><br><span class="line">    private route: ActivatedRoute,</span><br><span class="line">    private location: Location</span><br><span class="line">  ) &#123; &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  ngOnInit() &#123;</span><br><span class="line">    <span class="comment">//获取路由中的 参数信息</span></span><br><span class="line">    <span class="built_in">this</span>.id = <span class="built_in">this</span>.route.snapshot.paramMap.get(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line">      </span><br><span class="line">    <span class="comment">//获取路由中的data 信息</span></span><br><span class="line">    <span class="comment">//console.log(this.route.snapshot.data.title)</span></span><br><span class="line">      </span><br><span class="line">    <span class="comment">//获取路由参数的信息</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.route.snapshot.queryParams)</span><br><span class="line">      </span><br><span class="line">    <span class="comment">//获取当前路径，回退</span></span><br><span class="line">    <span class="comment">//console.log(this.location.path())</span></span><br><span class="line">    <span class="comment">//this.location.back();</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#3.login.components.html</span><br><span class="line">&lt;p&gt;login works! &#123;&#123;id&#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-4-Services（服务）"><a href="#2-4-Services（服务）" class="headerlink" title="2.4 Services（服务）"></a>2.4 Services（服务）</h3><p><img src="angular%E6%A0%B8%E5%BF%83%E8%AF%AD%E6%B3%95/service.png" alt="service.png"></p>
<p>服务是一个广义范畴，包括：值、函数或应用所需的功能。</p>
<p>说白了服务就是针对某个单一或系统功能的封装，例如在 Angular 核心包里面，最典型的一个服务就是 Http 服务。</p>
<p>几乎任何东西都可以是一个服务。 典型的服务是一个类，具有专注的、明确的用途。它应该做一件特定的事情，并把它做好。</p>
<p>例如：</p>
<ul>
<li>日志服务</li>
<li>和服务端接口交互的服务</li>
</ul>
<p>组件类应保持精简。组件本身不从服务器获得数据、不进行验证输入，也不直接往控制台写日志。 它们把这些任务委托给服务。</p>
<p>服务仍然是任何 Angular 应用的基础。组件就是最大的服务消费者。</p>
<p>组件的任务就是提供用户体验，仅此而已。它介于视图（由模板渲染）和应用逻辑（通常包括<em>模型</em>的某些概念）之间。 设计良好的组件为数据绑定提供属性和方法，把其它琐事都委托给服务。</p>
<p>Angular 不会<em>强制要求</em>我们遵循这些原则。 即使我们花 3000 行代码写了一个“厨房洗碗槽”组件，它也不会抱怨什么。</p>
<h3 id="2-5-依赖注入（Dependency-injection）"><a href="#2-5-依赖注入（Dependency-injection）" class="headerlink" title="2.5 依赖注入（Dependency injection）"></a>2.5 依赖注入（Dependency injection）</h3><p><img src="angular%E6%A0%B8%E5%BF%83%E8%AF%AD%E6%B3%95/dependency-injection.png" alt="dependency-injection.png"></p>
<p>“依赖注入”是提供类的新实例的一种方式，还负责处理好类所需的全部依赖。大多数依赖都是服务。 Angular 使用依赖注入来提供新组件以及组件所需的服务。</p>
<h3 id="2-6-HTTP服务"><a href="#2-6-HTTP服务" class="headerlink" title="2.6 HTTP服务"></a>2.6 HTTP服务</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.module.ts:</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> &#123;NgModule&#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;BrowserModule&#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-browser&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//HttpClientModule</span></span><br><span class="line"><span class="keyword">import</span> &#123;HttpClientModule&#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/common/http&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@NgModule</span>(&#123;</span><br><span class="line">  imports: [</span><br><span class="line">    BrowserModule,</span><br><span class="line">    <span class="comment">//加入HttpClientModule</span></span><br><span class="line">    HttpClientModule,</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> MyAppModule &#123;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; HttpClient, HttpHeaders &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/common/http&#x27;</span>;</span><br><span class="line"><span class="comment">//发起一个 get 请求</span></span><br><span class="line"><span class="meta">@Component</span>(...)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> MyComponent <span class="keyword">implements</span> OnInit &#123;</span><br><span class="line">  results: <span class="built_in">string</span>[];</span><br><span class="line"> </span><br><span class="line">  <span class="comment">//在构造函数中注入HttpClient</span></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> http: HttpClient</span>) &#123;&#125;</span><br><span class="line"> </span><br><span class="line">  ngOnInit(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// 发送get请求</span></span><br><span class="line">    <span class="built_in">this</span>.http.get(<span class="string">&#x27;/api/homead&#x27;</span>).subscribe(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//请求错误</span></span><br><span class="line">    err =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;Something went wrong!&#x27;</span>);    </span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#代理设置</span><br><span class="line"><span class="comment">//在项目根目录下创建 proxy.conf.json</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;/api&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;target&quot;</span>: <span class="string">&quot;http://localhost:3001/&quot;</span>,</span><br><span class="line">        <span class="string">&quot;changeOrigin&quot;</span>: <span class="literal">true</span>, </span><br><span class="line">        <span class="string">&quot;logLevel&quot;</span>: <span class="string">&quot;debug&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#修改package.json</span><br><span class="line"><span class="string">&quot;start&quot;</span>: <span class="string">&quot;ng serve --proxy-config proxy.conf.json&quot;</span>,</span><br></pre></td></tr></table></figure>

<h2 id=""><a href="#" class="headerlink" title=""></a></h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/14/angular%E6%A0%B8%E5%BF%83%E8%AF%AD%E6%B3%95/" data-id="ckdzwmbdq001e0wv09z6e4lyj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-函数原型" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/14/%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B/" class="article-date">
  <time datetime="2018-02-14T08:04:59.000Z" itemprop="datePublished">2018-02-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/14/%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B/">函数原型</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="一、函数声明的实质"><a href="#一、函数声明的实质" class="headerlink" title="一、函数声明的实质"></a>一、函数声明的实质</h2><p>我们平时大量使用Function，但是真的懂Function吗？</p>
<p>声明一个函数的时所使用的代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function fn(num1,num2)&#123;</span><br><span class="line">    return num1+num2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其实它的实质是使用了Function的构造函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;Function(参数1，参数2，...，函数体);</span><br><span class="line">var fn &#x3D; new Function(&#39;num1&#39;,&#39;num2&#39;,&#39;return num1+num2&#39;);</span><br></pre></td></tr></table></figure>

<p>这两种声明方式是等同的，但从第二种写法上，我们可以很清晰的看出fn函数是由Function构造出来的。</p>
<h2 id="二、JavaScript对象"><a href="#二、JavaScript对象" class="headerlink" title="二、JavaScript对象"></a>二、JavaScript对象</h2><p>我们先来看一个例子</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(typeof Object);</span><br><span class="line">console.log(typeof Function);</span><br></pre></td></tr></table></figure>

<p>打印结果都是Function，这是为什么了，为什么Object也是Function？</p>
<p>那是因为<strong>JS中所有的函数都是Function的实例</strong>，Object也是由构造函数构建的，那么Object的类型也是Function。</p>
<p>值得注意的是：<strong>Function自身能够生成自身，即Function的原型就是Function。</strong>即</p>
<p>我们用一张图来解释这其中的关系</p>
<p><img src="%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B/yuan1.png" alt="函数原型"></p>
<p>结合上一章所介绍的原型链，综合给出一张关系图</p>
<p><img src="%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B/yuan2.png" alt="原型链加函数原型"></p>
<p>[声明]：本篇文章中部分引用 <a target="_blank" rel="noopener" href="https://blog.csdn.net/swl979623074/article/details/78836767">从Function说原型</a> 的文章。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/14/%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B/" data-id="ckdzwmbdk000w0wv05lfb6rib" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-GitLab" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/01/12/GitLab/" class="article-date">
  <time datetime="2018-01-12T08:08:49.000Z" itemprop="datePublished">2018-01-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/12/GitLab/">GitLab</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>GitLab 是一个用于仓库管理系统的开源项目，使用<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Git">Git</a>作为代码管理工具，并在此基础上搭建起来的web服务。安装方法是参考GitLab在GitHub上的Wiki页面</p>
<p><strong>GitLab</strong>是由GitLabInc.开发，使用<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/MIT%E8%AE%B8%E5%8F%AF%E8%AF%81">MIT许可证</a>的基于<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%BD%91%E7%BB%9C">网络</a>的<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Git">Git</a><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E4%BB%93%E5%BA%93">仓库</a>管理工具，且具有<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/wiki">wiki</a>和issue跟踪功能。使用<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Git">Git</a>作为代码管理工具，并在此基础上搭建起来的web服务。</p>
<p>GitLab由乌克兰程序员DmitriyZaporozhets和ValerySizov开发，它使用<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Ruby%E8%AF%AD%E8%A8%80">Ruby语言</a>写成。后来，一些部分用<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Go%E8%AF%AD%E8%A8%80">Go语言</a>重写。截止2018年5月，该公司约有290名团队成员，以及2000多名开源贡献者。GitLab被IBM，Sony，JülichResearchCenter，NASA，Alibaba，Invincea，O’ReillyMedia，Leibniz-Rechenzentrum(LRZ)，CERN，SpaceX等组织使用。</p>
</blockquote>
<h2 id="注册GitLab账户"><a href="#注册GitLab账户" class="headerlink" title="注册GitLab账户"></a>注册GitLab账户</h2><p><a target="_blank" rel="noopener" href="https://git.lug.ustc.edu.cn/users/sign_in">https://git.lug.ustc.edu.cn/users/sign_in</a></p>
<p><img src="GitLab/Snipaste_2019-09-26_14-59-06.png" alt="Snipaste_2019-09-26_14-59-06"></p>
<ol>
<li>方式一：科学上网后输入相关信息，傻瓜式注册</li>
<li>方式二：使用GitHub账户关联注册（推荐）</li>
</ol>
<h2 id="创建工作组"><a href="#创建工作组" class="headerlink" title="创建工作组"></a>创建工作组</h2><blockquote>
<p>团队合作开发大型项目时，会根据业务线的不同进行项目分组</p>
<p>在工作组中可以继续创建子工作组或项目</p>
</blockquote>
<h3 id="创建主工作组"><a href="#创建主工作组" class="headerlink" title="创建主工作组"></a>创建主工作组</h3><p><img src="GitLab/Snipaste_2019-09-26_15-14-13.png" alt="Snipaste_2019-09-26_15-14-13"></p>
<h3 id="创建子工作组"><a href="#创建子工作组" class="headerlink" title="创建子工作组"></a>创建子工作组</h3><p><img src="GitLab/Snipaste_2019-09-26_15-17-22.png" alt="Snipaste_2019-09-26_15-17-22"></p>
<h3 id="自工作组中创建项目"><a href="#自工作组中创建项目" class="headerlink" title="自工作组中创建项目"></a>自工作组中创建项目</h3><p><img src="GitLab/Snipaste_2019-09-26_15-18-57.png" alt="Snipaste_2019-09-26_15-18-57"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;目录结构</span><br><span class="line">|___howlGroup</span><br><span class="line">    |___test-project</span><br><span class="line">            |___plugin-module</span><br><span class="line">            |___child-module</span><br><span class="line">            |___master-module</span><br></pre></td></tr></table></figure>

<h2 id="项目中创建分支"><a href="#项目中创建分支" class="headerlink" title="项目中创建分支"></a>项目中创建分支</h2><blockquote>
<p>项目中远程分支默认只有一个master分支，而在日常开发中都避免直接使用master分支，我们会创建一个子分支来进行日常的项目开发</p>
</blockquote>
<p><img src="GitLab/Snipaste_2019-09-26_15-25-53.png" alt="Snipaste_2019-09-26_15-25-53"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">分支命名规则可自定义</span><br><span class="line">我一般使用的规则为  项目名称-当前工作阶段的约定截止日期</span><br><span class="line"></span><br><span class="line">##</span><br><span class="line">公司中在进行项目迭代时会约定项目上线日期; 如: plugin-module需要在2019年9月30号更新上线</span><br><span class="line">则分支命名为 plugin-20190930</span><br><span class="line">##</span><br><span class="line">另外此分支并不是你创建后直供你一人使用，它是提供给此项目中其他开发者共同使用，因为大家都需要使当前开发需求在2019年9月26号上线</span><br></pre></td></tr></table></figure>

<p>以上所述为项目开发分支，另外需要创建提测分支，这个分支是将你修改好的代码提交至后台自动打包，由测试人员拉到测试环境中进行测试，测试成功后才可以将开发分支的代码merge到master分支</p>
<p>关于提测分支的创建，和使用GitLab流水线自动打包，日后再述。</p>
<h2 id="绑定SSH"><a href="#绑定SSH" class="headerlink" title="绑定SSH"></a>绑定SSH</h2><p>将本地的SSH-key绑定至GitLab<img src="GitLab/Snipaste_2019-09-26_15-38-39.png" alt="Snipaste_2019-09-26_15-38-39"></p>
<p><img src="GitLab/Snipaste_2019-09-26_15-40-28.png" alt="Snipaste_2019-09-26_15-40-28"></p>
<p>关于如何创建SSH-Key请参见<a target="_blank" rel="noopener" href="https://howlcn1997.github.io/2018/01/01/HexoAndGit/">用Hexo和Git搭建github个人博客</a>中 <strong>5. GithubSHH配置</strong></p>
<h2 id="本地分支与远程分支进行关联"><a href="#本地分支与远程分支进行关联" class="headerlink" title="本地分支与远程分支进行关联"></a>本地分支与远程分支进行关联</h2><blockquote>
<p>这里就以 plugin-module 项目为例子</p>
</blockquote>
<h3 id="拉取远程仓库中的代码"><a href="#拉取远程仓库中的代码" class="headerlink" title="拉取远程仓库中的代码"></a>拉取远程仓库中的代码</h3><blockquote>
<p>关于什么是项目的SSH，同样请参见<a target="_blank" rel="noopener" href="https://howlcn1997.github.io/2018/01/01/HexoAndGit/">用Hexo和Git搭建github个人博客</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone [项目SSH]</span><br></pre></td></tr></table></figure>

<h3 id="创建本地分支"><a href="#创建本地分支" class="headerlink" title="创建本地分支"></a>创建本地分支</h3><blockquote>
<p>本地分支为master，日常开发不可以直接使用它</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b [自定义分支名]</span><br></pre></td></tr></table></figure>

<p>一般都使用与远程对应开发分支相同的名字，这里就是用上述中的 plugin-20190926 分支</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b plugin-20190930</span><br></pre></td></tr></table></figure>

<p>至此在远程仓库中已有master和plugin-20190926分支，本地也有master和plugin-20190926分支，但是此时本地的plugin-20190926与远程分支plugin-20190926是毫无关联的，我们需要进行关联。</p>
<h3 id="本地分支与远程分支进行关联-1"><a href="#本地分支与远程分支进行关联-1" class="headerlink" title="本地分支与远程分支进行关联"></a>本地分支与远程分支进行关联</h3><ol>
<li><p>查看所有分支</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -a</span><br></pre></td></tr></table></figure>

<p><img src="GitLab/Snipaste_2019-09-26_15-59-32.png" alt="Snipaste_2019-09-26_15-59-32"></p>
</li>
<li><p>关联</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch --set-upstream-to&#x3D;[远程分支名] [本地分支名]  &#x2F;&#x2F;命令</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch --set-upstream-to&#x3D;origin&#x2F;plugin-20190930 plugin-20190930</span><br></pre></td></tr></table></figure>

<h2 id="开发"><a href="#开发" class="headerlink" title="开发"></a>开发</h2><blockquote>
<p>注意：在每一次开发之前都要保证当前本地的代码是最新的，则需要拉取代码 <code>$ git pull</code></p>
</blockquote>
<p>在本地进行开发…</p>
<h2 id="同步仓库"><a href="#同步仓库" class="headerlink" title="同步仓库"></a>同步仓库</h2><blockquote>
<p>开发完成后，将本地最新的代码同步回远程仓库中</p>
</blockquote>
<p>在<code>plugin-20190930</code>分支下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git status                           &#x2F;&#x2F;查看已改动代码</span><br><span class="line">$ git add [对饮文件或文件夹相对路径]     &#x2F;&#x2F;添加至index</span><br><span class="line">$ git commit                           &#x2F;&#x2F;提交至repository</span><br><span class="line">$ git pull</span><br><span class="line">$ git push                             &#x2F;&#x2F;提交至remote</span><br></pre></td></tr></table></figure>

<p>提交完毕，若过程中出现冲突可借助VS Code等工具快速解决冲突。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/01/12/GitLab/" data-id="ckdzwmbd000000wv08745ecy8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/react/">react</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/08/18/%E6%88%91%E7%9A%84%E5%8D%9A%E5%AE%A2/">我的博客</a>
          </li>
        
          <li>
            <a href="/2020/08/14/hhh/">hhh</a>
          </li>
        
          <li>
            <a href="/2020/08/13/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2020/03/27/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAreact-hooks/">深入浅出react hooks</a>
          </li>
        
          <li>
            <a href="/2020/03/22/nextJS/">nextJS</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>